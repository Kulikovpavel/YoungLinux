<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Урок 4. Установка и настройка HTML-редакторов в Drupal</title>
    <base href="" />
    <link type="text/css" rel="stylesheet" href="http://younglinux.info/misc/print.css" />
      </head>
  <body>
              <div class="section-1">
          
    <div id="node-334" class="section-2">
  <h1 class="book-heading">Урок 4. Установка и настройка HTML-редакторов в Drupal</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<p>Как можно было заметить на прошлом уроке, при создании статей не удобно размечать текст тегами HTML вручную, особенно если текст большой и содержит много структурных элементов. Куда удобней, когда можно просто нажимать на кнопки, после чего в текст добавляются соответствующая разметка и оформление так, как это бывает, например, в текстовых процессорах. Действительно, в Drupal можно подключать модули, которые позволяют использовать определенные HTML-редакторы, или сам модуль является реализацией редактора. В web широкое распространение нашли несколько редакторов: например, CKEditor, BUEditor, TinyMCE и др.</p>
<p>Текстовые редакторы делят на два класса — это плоские редакторы и так называемые WYSIWYG-редакторы ("что видишь, то и получишь"). В последних пользователь не вписывает и не видит теги (коды) разметки и оформления, он сразу видит конечный результат. То, каким образом достигается такое представление, скрыто от глаз пользователя.</p>
<p>Мы рассмотрим пару разных редакторов.</p>
<h3>CKEditor</h3>
<p>CKEditor представляет собой HTML-редактор типа WYSIWYG. Скачать его можно с сайта <span class="blue">ckeditor.com</span> (страница <span class="blue">download</span>, далее выбрать загрузку обычного CKEditor). Сделайте это, сохраните и распакуйте архив в любом месте (например, на рабочем столе).</p>
<p>CKEditor – это отдельный проект, не имеющий отношения к Drupal. Поэтому, чтобы подключить данный редактор к системе Drupal был разработан специальный модуль, который также называется CKEditor. Любые модули Drupal загружаются с сайта <span class="blue">drupal.org</span>. Чтобы быстро найти необходимый модуль, на главной странице этого сайта в форме вверху следует вписать его название и ниже выбрать вариант <span class="monoi">Modules</span>, после чего нажать <span class="monoi">Search</span> (поиск). Далее появится страница с ссылками подходящими под запрос поиска. Скорее всего, CKEditor будет первым. Перейдя на страницу модуля, вы можете загрузить подходящую версию (ссылки на архивы находятся в конце страницы, зеленым цветом помечены стабильные версии). Загрузите и распакуйте модуль. При распаковке будьте осторожны: не перепутайте модуль и сам редактор, т.к. их каталоги называются однаково.</p>
<p>Установим редактор в модуль:</p>
<ol>
<li>Откройте каталог, где находятся файлы модуля. Там есть одноименный каталог <span class="blue">ckeditor</span>. Зайдите в него, здесь вы должны увидеть текстовый файл <span class="monoi">COPY_HERE.txt</span>.</li>
<li>Переместите сюда каталог <span class="blue">ckeditor</span> с редактором.</li>
</ol>
<p>Теперь необходимо переместить каталог-модуль <span class="blue">ckeditor</span> в файловую структуру системы Drupal (туда, где установлен сайт). Но куда именно? В каталоге <span class="blue">WebServers/home/developer.home/www</span> есть директория под названием <span class="monoi">modules</span>. В ней находятся файлы всех модулей, изначально включенных в систему Drupal. Теоретически, если мы сюда поместим новый модуль, то система его увидит, и он будет работать. Однако так делать не следует. Все сторонние модули, загруженные пользователем, правильней помещать в каталог <span class="blue">sites/all/modules</span>. Папки <span class="blue">modules</span> в каталоге <span class="blue">all</span> в Drupal 6 по умолчанию нет, поэтому создайте ее и переместите сюда ранее сформированный каталог с модулем CKEditor.</p>
<p>Теперь в браузере перейдите на страницу модулей вашего сайта. Там должен появиться модуль CKEditor, включите его. После этого на главной странице управления сайтом в разделе <span class="monoi">Настройка сайта</span> появится ссылка на страницу конфигурации редактора CKEditor. Данный редактор имеет множество настроек, которые мы не будем рассматривать. Как вы можете заметить, модули устанавливаются на английском языке; для их русификации следует посетить сайт <span class="blue">drupaler.ru</span>. Пока мы этого тоже делать не будем, т.к. далее не будем использовать CKEditor. </p>
<p>Создайте новый материал типа <span class="monoi">Запись в блог</span>. Когда откроется страница добавления материала, вы увидите, что к полю редактирования текста прикреплена панель инструментов, подобно тому, что мы наблюдаем в любом текстовом процессоре. Попробуйте набрать произвольный текст и оформить его с помощью кнопок. Имейте ввиду, что здесь абзац формируется единичным нажатием Enter, а не двойным, как в "голом" Drupal. Если вам неудобно набирать текст в узком поле, то нажмите кнопку <span class="monoi">Максимизировать</span> и редактор развернется на все окно. Если требуется посмотреть, какие теги HTML вставляет редактор, то следует нажать на кнопку <span class="monoi">Источник</span>. Здесь можно редактировать материал вручную.</p>
<p>Назовите созданный вами материал Test1 и сохраните его.</p>
<p>Поскольку мы будем использовать другой редактор, зайдите на страницу модулей и отключите CKEditor.</p>
<h3>BUEditor</h3>
<p>BUEditor представляет собой более простой редактор, хотя назвать его "плоским" сложно. Теги вставляются с помощью кнопок, хотя пользователь видит именно теги разметки, а не результат их интерпретации. Поэтому BUEdior не является wysiwyg-редактором. Преимущество этого редактора заключается в том, что он легко настраивается под нужды пользователя.<br />
Для того, чтобы установить в систему BUEditor достаточно загрузить с сайта <span class="blue">drupal.org</span> и распаковать в каталог <span class="blue">sites/all/modules</span> модуль bueditor. Далее его надо включить на странице модулей сайта (если эта страница уже была открыта, то перезагрузите ее).</p>
<p>Создайте публикацию Test2, исследуйте при этом возможности редактора. BUEditor не переопределяет установки Drupal: абзац формируется двойным нажатием Enter.</p>
<p>Теперь перейдем на страницу конфигурации редактора (<span class="monoi">Управление ? Настройка сайта ? BUEditor</span>). Мы не будем русифицировать этот модуль, т.к. здесь не так уж много настроек и в большей степени они интуитивно понятны. Страница настроек BUEditor разделена на две части — <span class="monoi">Available editors</span> (доступные редакторы) и <span class="monoi">Role-editor assignments</span> (назначение редакторов ролям). В последних версиях BUEditor по умолчанию существует четыре разновидности редактора – BBCode, Commenter, Default и Lab. Версию Default мы уже видели, когда создавали материал Test2. Commenter представляет собой урезанную версию Default. BBCode использует специфичный язык разметки похожий на HTML; перед отображением страницы система Drupal преобразует теги BBCode в теги HTML. В Lab многие кнопки вызывают функции, осуществляющие те или иные действия (например, поиск, замену, отмену действия и т.д.).</p>
<p>В разделе <span class="monoi">Role-editor assignments</span> мы видим три роли, которые существуют на данный момент в системе Drupal. Это user #1 (администратор системы), зарегистрированный и анонимный пользователи. Анонимный пользователь — это любой посетитель сайта, не зарегистрированный в системе. По умолчанию в Drupal анонимные пользователи не имеют даже прав оставлять комментарии. Зарегистрированный пользователь — это пользователь, представившийся системе, через форму Вход в систему (которую мы видели, когда выходили из своего аккаунта). Перед этим пользователь однажды должен был пройти процедуру регистрации самостоятельно или с помощью администратора системы. Как видно, зарегистрированному пользователю не назначен никакой редактор. Назначьте ему Commenter.</p>
<p>Поменяйте для user #1 редактор с Default на Lab. Откройте на редактирование ранее созданную статью (Test1 или Test2). Оцените возможности такого варианта редактора. После этого установите для администратора снова редактор Default.</p>
<p>Ранее было отмечено, что BUEditor легко настраивается под нужды пользователя. Давайте выясним, как это делается. Допустим, нам надо отредактировать вариант редактора Default. Для этого перейдем по ссылке <span class="monoi">Редактировать</span> напротив его названия. Перед нами откроются настройки редактора Default. Наибольший интерес представляет раздел <span class="monoi">Buttons</span>. Назначение столбцов понять не сложно. Создадим еще одну кнопку в этом редакторе, например, Table, генерирующую теги таблицы, с вложенными в нее тегами одной строки и двух ячеек. Внизу в строке подсвеченной красным цветом в столбце Заголовок пишем Table. В строке содержимого должен быть код HTML или вызов функции языка JavaScript.</p>
<p>Напишем для таблицы понятный нам код:<br />
<div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;"><span style="color: #66cc66;">&lt;</span>table<span style="color: #66cc66;">&gt;</span>
  <span style="color: #66cc66;">&lt;</span>tr<span style="color: #66cc66;">&gt;</span>
    <span style="color: #66cc66;">&lt;</span>td<span style="color: #66cc66;">&gt;&lt;</span>/td<span style="color: #66cc66;">&gt;</span>
    <span style="color: #66cc66;">&lt;</span>td<span style="color: #66cc66;">&gt;&lt;</span>/td<span style="color: #66cc66;">&gt;</span>
  <span style="color: #66cc66;">&lt;</span>/tr<span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span>/table<span style="color: #66cc66;">&gt;</span></pre></div></p>
<p>Поскольку для таблицы нет пока иконки, то вместо ее имени файла пропишите слово Table. Сохраните изменения. В поле <span class="monoi">Demo</span> должна появиться кнопка Table, посмотрите, как она работает.</p>
<p>Теперь осталось подготовить иконку (рисунок *.png обычно размером 20x20 пикселей) и положить ее в каталог <span class="blue">/sites/all/modules/bueditor/icons/</span>. После этого перезагрузите страницу настроек редактора Default и в выпадающем списке иконок выберите ваш рисунок, сохранив после этого изменения. Следует отметить, что кнопки можно перемещать относительно друг друга, настраивая тем самым их последовательность над формой ввода текста.</p>
<p>Удалите две созданные на этом уроке статьи, используя форму на странице <span class="monoi">Управление ? Управление содержимым ? Содержимое</span>.</p>
  </div>
    </div>
  </body>
</html>
