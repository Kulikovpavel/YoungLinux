<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Урок 11. Создание видов</title>
    <base href="" />
    <link type="text/css" rel="stylesheet" href="http://younglinux.info/misc/print.css" />
      </head>
  <body>
              <div class="section-1">
          
    <div id="node-346" class="section-2">
  <h1 class="book-heading">Урок 11. Создание видов</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<p>Страницы, содержащие не конкретные статьи, а коллекции материалов, по умолчанию в Drupal организованы наподобие дневников, когда более новые записи появляются вверху, а старые уходят вниз и на следующие страницы. Таким образом, например, организован внешний вид главной страницы и страниц терминов таксономии. Та начальная часть каждой статьи, которая отображается на странице-коллекции, называется аннотацией, анонсом и т.п. Длину анонса можно поменять на странице <span class="monoi">Настройки публикации</span>. Также здесь можно изменить количество публикуемых материалов на каждой странице-коллекции.</p>
<p>Часто бывает, что подобный внешний вид не устраивает владельцев сайта, они хотят или им требуется что-то особенное для их web-ресурса. Именно для таких случаев предназначен модуль Views (Виды). Загрузите и установите его в файловую структуру сайта; также с сайта <span class="blue">drupaler.ru</span> загрузите и установите файл перевода для данного модуля, т.к. сам модуль достаточно сложен и работа с ним и без того обычно малопонятна начинающим. Если вы экспортируете перевод в формате пакета, то после его разархивации переместите содержимое в папку модуля Views.</p>
<p>Включите следующие подмодули: Views и Views UI. Перейдите на страницу <span class="monoi">Конструкция сайта ? Представления</span>. Здесь уже есть несколько готовых представлений (включенные или нет). Включим представление frontpage, которое предназначено для формирования главной страницы, и перейдем на страницу его редактирования.</p>
<p>Перед вами откроется сложная форма с множеством настроек. Слева будут три вкладки — <span class="monoi">Default</span> (по умолчанию), <span class="monoi">Page</span> (Страница) и <span class="monoi">Feed</span>. Выберем Page, т.к. нам требуется настроить вид именно целой страницы. Затем в разделе <span class="monoi">Основные настройки</span> формы щелкните по значению <span class="monoi">нет</span> свойства <span class="monoi">Заголовок</span>. Внизу появится текстовое поле, куда можно вписать заголовок, который будет отображаться на странице. Впишите туда фразу "Новое на сайте". Обратите внимание на кнопку <span class="monoi">Переопределить</span>. Если ее не нажимать, то изменения затронут все представление, а не только Page. В данном случае нас это устраивает. Поэтому сразу нажимаем на кнопку <span class="monoi">Обновить отображение по умолчанию</span>.</p>
<p>Установите стиль в значение <span class="monoi">Таблица</span>, щелкнув по фразе <span class="monoi">Без форматирования</span>.</p>
<p>На странице надо что-то отображать. Это что-то определяется с помощью полей. Поле можно представить как определенную часть каждой статьи (материала). Например, поля — это заголовок, дата создания, автор, термин таксономии, к которому относится статья и т.д.<br />
Щелкните по плюсу рядом с разделом <span class="monoi">Поля</span>. Внизу появится список флажков — это поля, которые могут быть отображены в виде. Выберите следующее:</p>
<ul>
<li>Материал: Заголовок, </li>
<li>Материал: Дата создания, </li>
<li>Материал: Содержимое. </li>
</ul>
<p>Нажмите на кнопку <span class="monoi">Добавить</span>. В разделе <span class="monoi">Поля</span> появятся три поля, а ниже перед вами поочередно будут открываться настройки этих полей. Пока просто удалим из них метки и нажмем на кнопки <span class="monoi">Обновить отображение по умолчанию</span>.</p>
<p>В разделе <span class="monoi">Настройка страницы</span> адрес указан как <span class="blue">frontpage</span>. По умолчанию главная страница имеет адрес <span class="blue">node</span>. Можно либо поменять в настройках сайта, что главная страница будет не <span class="blue">node</span>, а <span class="blue">frontpage</span>. Либо непосредственно на странице редактирования представления поменять <span class="blue">frontpage</span> на <span class="blue">node</span>. Предпочтем второй вариант. После этого сохраните представление и посмотрите на главную страницу сайта (не уходите со страницы редактирования вида, лучше откройте вторую вкладку). Страница преобразилась, но вряд ли мы хотели именно такого вида: дата идет впереди заголовка, заголовок ничем не выделяется, а статьи представлены целиком. Продолжим редактировать вид Page представления.</p>
<p>Нажмите на кнопку с двумя стрелками рядом с разделом <span class="monoi">Поля</span>. Ниже появится форма <span class="monoi">Перестроить поля</span>. Поднимите заголовок выше даты создания, после чего нажмите на кнопку <span class="monoi">Обновить</span>. Теперь щелкните поле <span class="monoi">Материал: Заголовок</span>, в форме его редактирования установите флажок <span class="monoi">Заменить выводимое полем значением</span> и пропишите в многострочном текстовом поле <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>h3<span style="color: #66cc66;">&gt;</span><span style="color: black;">&#91;</span>title<span style="color: black;">&#93;</span><span style="color: #66cc66;">&lt;</span>/h3<span style="color: #66cc66;">&gt;</span></code></span>. Кроме того установите флажок <span class="monoi">Связать это поле с его материалом</span>. Сохраните изменения. Щелкните по полю <span class="monoi">Материал: Содержимое</span> и в его настройках установите флажок <span class="monoi">Установить для этого поля максимальную длину</span>. Пусть максимальная длина будет равна 400 символам.</p>
<p>Обратите внимание, что внизу вы можете видеть, как будет теперь выглядеть главная страница. </p>
<p>В основных настройках вида нажмите на кнопку с шестеренкой рядом со свойством <span class="monoi">Стиль</span>. Поменяйте колонку даты создания на <span class="monoi">Материал: заголовок</span>.</p>
<p>В свойстве <span class="monoi">Элементов на страницу</span> укажем значение 6. Сохраните представление и посмотрите, как выглядит главная страница.</p>
<p>Ранее мы решили кроме прочего организовать коллекции материалов по месяцам. Для этого пришлось создавать подшивку. На самом деле куда правильней использовать специальное представление. Поскольку многие сайты коллекционируют материалы по месяцам, то модуль Views уже включает в себя представление arсhive. Включите его и перейдите на страницу  редактирования.</p>
<p>У вида Page представления archive меняем стиль на табличный и добавляем следующие поля:</p>
<ul>
<li>Материал: Заголовок,</li>
<li>Материал: Дата создания, </li>
<li>Пользователь: Название, </li>
<li>Материал: Тип</li>
<li>Таксономия: Все термины. </li>
</ul>
<p>Устанавливаем последовательность полей такую, как приведена в списке. Сохраняем вид.</p>
<p>Откройте страницу <span class="monoi">Блоки</span> системы Drupal. В отключенных блоках появился новый блок <span class="monoi">Archive list</span>. Разместите его на сайте вместо блока <span class="monoi">Архив подшивок</span>. После этого посмотрите, как выглядят архивы месяцев.</p>
<p>Немного подредактируем представление. Щелкните по полю <span class="monoi">Материал: Заголовок</span> и установите флажок <span class="monoi">Связать это поле с его материалом</span>. Для <span class="monoi">Пользователь: Название</span> в метку впишите слово "Автор", а также снимите флажок <span class="monoi">Ссылаться на пользователя</span>. В основных настройках свойству <span class="monoi">Элементов на страницу</span> присваиваем значение <span class="monoi">Не ограниченно</span> (для этого следует прописать 0). Сохраните представление и посмотрите страницы архива.</p>
<p>Итак, модуль Views предоставляет возможность организовать материалы сайте не стандартным образом. Хотя в данном уроке мы использовали готовые представления, ничего не мешает вам создавать собственные. Следует знать, что возможности модуля Views намного превосходят рассмотренные на этом уроке.</p>
  </div>
    </div>
  </body>
</html>
