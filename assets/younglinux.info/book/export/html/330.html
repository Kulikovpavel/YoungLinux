<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Создание сайта на Drupal 6. Практический вводный курс</title>
    <base href="" />
    <link type="text/css" rel="stylesheet" href="http://younglinux.info/misc/print.css" />
      </head>
  <body>
        
    <div id="node-330" class="section-1">
  <h1 class="book-heading">Создание сайта на Drupal 6. Практический вводный курс</h1>
  <h3>Пояснительная записка</h3>
<p>Данный курс включает следующее:</p>
<ul>
<li>Описание установки движка (CMS – системы управления контентом) Drupal на локальном сервере. В качестве программной среды для локального сервера используется Denwer и Windows; возможно в будущем курс будет включать описание установки Drupal в Linux.</li>
<li>Создание сайта-блога на основе Drupal.</li>
<li>Основы администрирования сайта.</li>
<li>Установка темы оформления и ее правка.</li>
<li>Знакомство с понятием таксономии в web.</li>
<li>Работа с модулями Views, CCK, Image, Geshifilter и др.</li>
</ul>
<p>При создании учебного сайта, описанного в курсе, в качестве его контента (наполнения) использовались статьи и изображения с сайта http://younglinux.info, http://inf1.info. Подготовленный материал для работы с данным пособием содержится в <a href="http://younglinux.info/sites/default/files/articles.rar">архиве</a>. Однако вам ничего не мешает использовать собственный контент при создании учебного сайта с помощью этого пособия.</p>
<p>Курс предполагает, что обучаемый знаком с основными тегами HTML и как минимум знает о назначении языка CSS. </p>
<table id="attachments" class="sticky-enabled">
 <thead><tr><th>Прикрепленный файл</th><th>Размер</th> </tr></thead>
<tbody>
 <tr class="odd"><td><a href="http://younglinux.info/sites/default/files/practicumDrupal6.pdf">pdf-версия пособия &quot;Создание сайта на Drupal 6. Практический вводный курс&quot;</a></td><td>393.1 кб</td> </tr>
</tbody>
</table>
  <div id="node-331" class="section-2">
  <h1 class="book-heading">Урок 1. Установка Drupal, первое знакомство с системой управления контентом</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<p>Установите Denwer, скачав установочный пакет с официального сайта программы. На системном диске компьютера (там, где установлена Windows) должен появиться каталог <span class="blue">WebServers</span>. В нем есть каталог <span class="blue">home</span>. Зайдите в него и создайте папку; присвойте ей доменное имя вашего будущего сайта. Доменное имя потом можно менять, т.е. менять название папки. Содержимое сайта от этого не меняется и не теряется. Поскольку мы создаем сайт на локальном компьютере, а не в Интернет, то пусть его доменное имя будет,  например, таким: <span class="blue">developer.home</span>. Итак, в папке home должен быть создан каталог <span class="blue">developer.home</span>. Зайдите в него и создайте там каталог <span class="blue">www</span>. На разных web-серверах используется свой способ организации файловой структуры. Так, например, в Denwer требуется создавать каталог www, и только там размещать файлы сайта. </p>
<p>Скачайте архив Drupal 6-й версии с сайта <span class="blue">drupal.org</span> или <span class="blue">drupal.ru</span>. Распакуйте его, все файлы из распакованного архива переместите в каталог <span class="blue">www</span>.</p>
<p>Если во время установки Denwer на рабочем столе были созданы ярлыки, то запустите сервер с помощью ярлыка <span class="monoi">Start Denwer</span>. Если ярлыков нет, то зайдите в <span class="blue">WebServers\denwer</span> и запустите файл <span class="monoi">Run.exe</span>.</p>
<p>Теперь в браузере перейдите по адресу <span class="blue">localhost/Tools/phpMyAdmin/</span>. Localhost – это сетевое имя вашего локального хоста (компьютера), а phpMyAdmin — это инструмент (программа) для управления базами данных, описанными на языке программирования MySQL. Системы управления контентом, в том числе и Drupal, обычно работают с данными, сохраненными в базах данных. Вообще база данных для сайта имеет ключевое значение, ее потеря или порча может "убить" сайт насовсем. Файлы же самого движка Drupal и его модулей всегда можно загрузить снова. Но есть одно но. В процессе жизни сайта на него загружаются картинки, архивы, иные файлы. Нужно знать, в каком(их) каталоге(ах) они сохраняются, и также, как и для базы данных, регулярно делать их резервные копии.</p>
<p>С помощью интерфейса phpMyAdmin создадим базу данных, назовем ее <span class="monoi">developer</span>. Для этого в поле <span class="monoi">Create new database</span> следует вписать имя и нажать кнопку <span class="monoi">Create</span>. Запомните, как вы назвали базу данных; эти данные понадобятся при установке Drupal. Также заметьте, что база данных пуста — в ней нет таблиц.</p>
<p>Перейдите в браузере по адресу <span class="blue">developer.home</span>. Запустится установщик Drupal, он будет на английском языке. Будет предложено либо продолжить установку на английском, либо узнать, как инсталлировать Drupal на иных языках. Выберем пункт <span class="monoi">Install Drupal in English</span>, а русифицируем систему позже, уже после установки. Далее должно появиться сообщение об ошибке, которая должна быть устранена, чтобы инсталляционный процесс мог продолжиться. Ошибка эта заключается в том, что должен быть файл с настройками <span class="monoi">settings.php</span>, и во время установки у него должно быть установлено разрешение на возможность записи. После установки Drupal должно быть оставлено только разрешение на чтение для владельца. На локальном сервере обычно можно не возиться с разрешениями на файлы, но при размещении сайта в Интернет будьте внимательны. Заходим в каталог <span class="blue">sites\default</span> движка Drupal (в каталоге www), делаем копию файла <span class="monoi">default.settings.php</span> и называем ее <span class="monoi">settings.php</span>. После чего в браузере нажимаем F5.</p>
<p>Далее происходит переход к настройкам базы данных. Наша база называется <span class="monoi">developer</span>. На локальном сервере обычно пользователь базы данных — root, пароль отсутствует. При размещении сайта на хостинге вам обычно самим надо будет создавать пользователя и связывать его с определенной базой данных. Но не здесь, так что пока вписываем в поле <span class="monoi">Database name</span> слово <span class="monoi">developer</span>, а в поле <span class="monoi">Database username</span> - <span class="monoi">root</span>; продолжаем установку.</p>
<p>После установки сайта предлагается выполнить первоначальную его настройку. Все, что здесь вписывается, в последствии может быть исправлено. Пусть сайт называется "Путь программиста". Далее вписываются данные администратора сайта. Администратор — это самый важный человек для сайта. Причем не надо путать пользователя базы данных и администратора сайта — это разные вещи! Вам надо придумать имя и пароль для администратора и хорошо их запомнить. Забудете — ваша проблема. Да, имя пользователя и пароль всегда можно будет исправить, но только если вы знаете старые имя и пароль.</p>
<p>После первоначальной настройки сайта появляется сообщение, что установка Drupal завершена и можно посетить ваш новый сайт. Сделайте это.</p>
<p>На главной странице сайта, помимо небольшого меню слева, вы увидите приветствие и четыре пункта того, что желательно сделать. Предлагается сделать примерно следующее: 1 — настроить сайт, 2 — подключить дополнительные возможности, 3 — выбрать оформление, 4 — приступить к написанию содержания сайта. Но не будем спешить.</p>
<p>Давайте сначала посмотрим, что случилось с базой данных. Зайдите в phpMyAdmin, убедитесь, что у базы данных <span class="monoi">developer</span> появилось около 50 таблиц. Именно в них будет храниться содержимое сайта, а сам движок лишь управляет им. В последствии число таблиц может увеличиваться.</p>
<p>Вернемся к сайту. В меню присутствуют четыре пункта: <span class="monoi">My account</span> (аккаунт), <span class="monoi">Create content</span> (создать материал, т.е. контент, т.е. содержимое сайта), <span class="monoi">Administer</span> (администрировать, управлять), <span class="monoi">Log out</span> (выйти). Нажмите <span class="monoi">Log out</span>, посмотрите, как изменится меню, войдите в систему обратно, введя имя пользователя и пароль.</p>
<p>Нажмите <span class="monoi">Administer</span>, произойдет переход на страницу, где открывается доступ ко всем настройкам. В разделе <span class="monoi">Site configuration</span> выберите пункт <span class="monoi">Site information</span>. Давайте придумаем какой-нибудь слоган для нашего сайта. Например, "Разработка и web-дизайн". Сохраните конфигурацию. Ничего не изменилось, но это пока. </p>
<p>Теперь попробуем изменить оформление сайта. Нажимаем <span class="monoi">Administer</span> и в разделе <span class="monoi">Site building</span> выбираем <span class="monoi">Themes</span>. Попробуйте уже установленные там темы, в конце снова вернитесь к теме Garland. </p>
<p>Обратим внимание на комментарии под названиями тем. Там перечисляются ключевые  особенности построения тем оформления, то есть того, как эти темы созданы и какими свойствами обладают. Не вдаваясь в подробности, можно сказать, что тема представляет собой описание расположения, типов и свойств элементов страницы на языках HTML и CSS. Выбор темы — это не только выбор оформления сайта, но и в определенной степени выбор его поведения. Кроме того, оттого как организована тема, сайт может лучше или хуже индексироваться поисковыми системами (Yandex, Google и др.). Например, считается, что лучше выбирать бестабличные темы. Так темы Bluemarine и Chameleon основаны на таблицах, т.е. разные области страницы представляют собой ячейки таблицы. Темы Garland и Minnelli бестабличные. Но первая имеет плавающую ширину (fluid), а вторая – фиксированную (fixed). При fluid-темах ширина страниц сайт изменяется в зависимости от рабочей области окна браузера. Чем шире монитор, окно, тем больше сайт растягивается в ширину. Фиксированные по ширине сайты остаются одного размера не зависимо от рабочей области. Поскольку мы не знаем ширину монитора пользователя (а он может быть большим, и читать содержимое сайта будет не удобно), возможно лучше выбирать fixed-темы. </p>
<p>Измените размер окна браузера и отметьте, как меняется ширина сайта. Строки контента (не меню) становятся либо длиннее, либо короче. Включите тему Minnelli и также понаблюдайте за поведением сайта (длина строки теперь не меняется). Остановим свой выбор на Minnelli.</p>
<p>Возможно, нас не устраивает ширина сайта. Мы хотим, чтобы он был фиксированного размера, но немного шире, чем есть. Как быть? Бывает, что настройка ширины есть в интерфейсе настройки темы в системе Drupal, а бывает, что ее там нет, и приходится править файлы <span class="monoi">*.css</span> темы вручную. </p>
<p>Исследуем настройки темы Minnelli. Для этого перейдите по ссылке configure, которая находится в конце строки с названием темы. У каждой темы могут быть свои специфические настройки. В данном случае, можно выбрать цветовую схему (из готовых шаблонов или настроить по своему усмотрению), включить определенные элементы страницы, загрузить логотип и иконку сайта, но изменить ширину сайта через интерфейс возможности нет. Поэтому оставим эту задачу на потом. Пока выберите понравившуюся вам цветовую схему или настройте свою; сохраните конфигурацию.</p>
<p>Обратите внимание, что флажок <span class="monoi">Site slogan</span> в настройках темы снят. Именно поэтому, когда мы написали слоган и сохранили его, он не отобразился. Включите этот флажок и сохраните настройки. Теперь в шапке сайта помимо его названия должен красоваться и слоган. Очень часто бывает, что тема не совсем корректно его отображает. Например, в одной строке с названием, как в данном случае. Получается не красиво, если слоган начинается с большой буквы. Давайте немного подправим слоган, пусть он будет выглядеть так: "- разработка и web-дизайн" (начинается с тире). Чтобы исправить слоган, перейдите к настройкам <span class="monoi">Site information</span>.</p>
<p>А нужен ли вообще слоган? На этот вопрос нельзя ответить однозначно. Бывает, что нет, если название сайта, его стиль или узнаваемый брэнд уже в достаточной степени сообщают о его содержании. Слоган как бы дает краткую характеристику сайта, описывает его цели. Желательно, чтобы он содержал ключевые (важные) для сайта слова. Так, если сайт о программировании, то поисковые системы лучше отреагируют на слова типа "программирование", "разработка", "код" и будут озадачены, если в названии сайта или его слогане будут красоваться не связанные с тематикой слова, например, "рецепты", "планета" и т.п. Поэтому если вы хотите назвать сайт как-то оригинально, будьте осторожны: поисковые роботы еще не в силах понять красоту фраз и их переносный смысл. Хотя жертвовать действительно оригинальным названием ради этого, не стоит.</p>
  </div>
<div id="node-332" class="section-2">
  <h1 class="book-heading">Урок 2. Перевод интерфейса, обновление и блоки сайта</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<h3>Перевод интерфейса</h3>
<p>Не очень удобно работать с системой, интерфейс которой на иностранном языке, если не очень хорошо знаешь язык и саму систему. Поэтому начинающим пользователям Drupal желательно установить перевод интерфейса на русский язык, так сказать, русифицировать систему. Перевод можно загрузить с сайта <span class="blue">drupaler.ru</span>. В верхней части этого сайта нажимаем кнопку <span class="monoi">Download</span>, выбираем <span class="monoi">Russian</span>. В поле <span class="monoi">Проект</span> набираем <span class="monoi">Drupal</span> и нажимаем <span class="monoi">Выбор проекта</span>. Далее следует выбрать релиз (версию) пакета перевода, он должен соответствовать версии системы Drupal, которую вы установили. В разделе <span class="monoi">Формат</span> переключите радиокнопку на вариант <span class="monoi">Все в одном файле</span>. Установить перевод интерфейса можно по-разному, но выберем самый простой. После нажатия кнопки Экспорт будет предложено сохранить файл (с расширением <span class="monoi">*.po</span>). Сохраните его пока в любом месте на вашем компьютере.</p>
<p>Теперь запустим Denwer и перейдем на страницу администрирования сайта. Если там поискать что-нибудь связанное с языками (что-то типа language) и переводом интерфейса (translate), то мы ничего не найдем. Следовательно, требуется включить дополнительную функциональность для сайта. Дополнительная функциональность обеспечивается модулями. Сам Drupal представляет собой в основном ядро, а разные модули как бы "прикручиваются" к нему, как какие-нибудь фичи, придающие сайту те или иные свойства и особенности.  Модулей существует огромное количество, лишь малая часть из них входит в поставку Drupal, остальные можно загрузить с сайта drupal.org. Каждый конкретный сайт использует ограниченное число модулей (что разумно), в зависимости от своих задач; но поскольку модулей много, то сайты, сделанные на Drupal, могут очень сильно отличаться между собой по своим возможностям. В этом заключается гибкость и настраиваемость CMS Drupal.</p>
<p>Итак, пока нам требуется включить возможность переводить интерфейс. Модуль, который это обеспечивает, уже входит в пакет Drupal. Поэтому сразу заходим в Modules и ищем там модуль Local, включаем его и сохраняем конфигурацию. Теперь на главной странице управления сайтом в разделе <span class="monoi">Site building</span> появился пункт <span class="monoi">Translate interface</span>, а в разделе <span class="monoi">Site configuration</span> — пункт <span class="monoi">Languages</span>.</p>
<p>Заходим в <span class="monoi">Translate interface</span> и выбираем <span class="monoi">Import</span>. В открывшейся форме указываем файл с переводом, загруженный ранее с сайта <span class="blue">drupaler.ru</span>, а также указываем язык перевода (<span class="monoi">Русский</span>) и нажимаем кнопку <span class="monoi">Import</span>. После чего в <span class="monoi">Site configuration</span> ? <span class="monoi">Languages</span> включаем радиокнопку <span class="monoi">Default</span> напротив русского языка. После сохранения конфигурации интерфейс станет русским.</p>
<h3>Cron, update.php</h3>
<p>Система управления содержимым Drupal регулярно требует проверки на наличие обновлений  для самой системы, ее модулей и тем. С этой целью надо с определенной периодичностью запускать так называемый Cron. Если он давно не запускался, то вы увидите сообщение на странице администрирования. Запустить Cron можно со страницы <span class="monoi">Модули</span>, либо <span class="monoi">Отчет о состоянии</span>. Свою работу Cron выполняет самостоятельно, ничего дополнительного вам делать не требуется. Зайдите в <span class="monoi">Отчет о состоянии</span> и кликните по ссылке <span class="monoi">запустить выполнение регулярных процедур</span>. Обычно этого достаточно.</p>
<p>Однако бывают ситуации, когда выходит новая версия модуля, самой системы Drupal или темы оформления. Тогда требуется удалить старую версию, загрузить новую и разместить ее  в соответствующем каталоге (на хостинге или локальном компьютере), где установлен Drupal. Если обновляется сам Drupal, то надо быть аккуратными при удалении; не удалить ничего лишнего, что не входит в пакет Drupal (сторонние модули, темы, загруженные изображения и др.). Поэтому настоятельно рекомендуется всё, что загружает пользователь (он же администратор сайта), хранить в отдельном каталоге CMS Drupal – <span class="blue">sites</span>. Там же (в <span class="blue">sites/default</span>) хранится такой важный файл, как <span class="monoi">settings.php</span>, с которым мы уже сталкивались при установке системы. В нем прописаны имя базы данных, имя пользователя базы данных и его пароль. Поэтому, размещая сайт в Интернете, устанавливайте для этого файла лишь право на чтение для владельца.</p>
<p>После включения новых и обновления старых компонентов сайта рекомендуется обновлять базу данных. Делается это с помощью скрипта <span class="monoi">update.php</span>, который расположен в корневой директории CMS Drupal. Найдите его в каталоге <span class="blue">WebServers\home\developer.home\www</span>. Чтобы его запустить, надо обратиться к нему через адресную строку браузера, например, так: <span class="blue">developer.home/update.php</span>. Можно прописать адрес вручную или перейти к этому файлу через страницу <span class="monoi">Модули</span> (<span class="blue">developer.home/admin/build/modules</span>), щелкнув там по ссылке <span class="monoi">update.php</span> (всегда читайте пояснения на страницах администрирования Drupal, система сама по себе хорошо документирована).</p>
<p>Также желательно запускать обновление базы данных перед ее экспортом. Это связано с тем, что после обновления размер базы уменьшается за счет удаления из нее временной информации.</p>
<p>Обновлять базу данных имеет право только администратор сайта. Чтобы в этом убедиться, выйдите из своего аккаунта (пункт <span class="monoi">Выйти</span> в меню) и попытайтесь запустить скрипт по адресу <span class="blue">developer.home/update.php</span>. Drupal вам сообщит, что доступ запрещен (access denied). Вернитесь в свой аккаунт и снова попробуйте запустить этот скрипт. Должно все получиться (на открывающихся страницах следует нажать <span class="monoi">Continue</span>, затем <span class="monoi">Update</span>).</p>
<h3>Блоки</h3>
<p>Как вы должно быть уже знаете, страницы сайта состоят из ряда областей, выполняющих свое определенное назначение. Так почти всегда у каждого сайта есть так называемая "шапка" - область вверху, где отображается его название и логотип; есть меню (только справа или только слева или по обеим сторонам); есть "подвал" - область внизу сайта; и есть самая большая центральная область, где располагают контент (текст) страниц. Бывает более сложная структура страниц сайта. Обычно шаблон страниц, также как и тема, применяется для всего сайта. И это правильно: было бы странно и неудобно ориентироваться на сайте, если бы на одной странице меню располагалось слева, а на другой вдруг переезжало вправо.</p>
<p>Чтобы увидеть какие структурные части (области) сайта есть, какие элементы (блоки) в них находятся, какие блоки можно еще добавить, надо перейти на страницу <span class="monoi">Блоки</span> (<span class="blue">developer.home/admin/build/block</span>).</p>
<p>Количество областей сайта, а также их названия определяются включенной темой сайта. Однако обычно всегда есть <span class="monoi">Содержимое, Левая колонка, Заголовок</span> и <span class="monoi">Подвал</span> (хотя они могут называться не обязательно именно так). Перемещать блоки между областями можно с помощью мыши (путем перетаскивания) или с помощью выпадающего списка. <em>Блоки</em> — это элементы сайта (меню, текстовые части, кнопки и др.). Блоки можно создавать и настраивать; некоторые модули автоматически создают блоки. Новые блоки сначала отключены.</p>
<p>Посмотрим, как обстоят дела у нас. В левую колонку помещены три блока: <span class="monoi">Вход в систему, Навигация</span> и <span class="monoi">Создано на Drupal</span>. Блок <span class="monoi">Вход в систему</span> мы видели, когда покидали свой аккаунт. <span class="monoi">Навигация</span> — это меню, настроенное изначально так, что его видит только администратор сайта; а <span class="monoi">Создано на Drupal</span> представляет собой кнопку со ссылкой на сайт <span class="blue">drupal.org</span>. Также существует ряд отключенных блоков, которые нам пока не нужны, а возможно будут не нужны никогда.</p>
<p>Давайте переместим кнопку <span class="monoi">Создано на Drupal</span> с левой колонки на правую, чтобы посмотреть, как изменится внешний вид сайта. Сохранив изменения, перейдите на главную страницу. Появилась правая колонка, но интересно отметить, что размер области, где располагается содержимое страницы, не изменился. Сайт стал шире, хотя на нем fixed-тема; просто fixed-размер стал другим, или, можно сказать, что он установлен только для области содержимого. Однако чаще бывает, что использование дополнительной области сужает область содержимого. Особенно критично это может быть как раз для fixed-тем. </p>
  </div>
<div id="node-333" class="section-2">
  <h1 class="book-heading">Урок 3. Добавление материалов, их типы. Фильтры HTML</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<p>Отметим на будущее, что будем создавать web-сайт типа "блог". Блог представляет собой регулярно обновляемый сайт статей, отсортированных в хронологическом порядке, и предполагающий комментарии читателей.</p>
<p>Первая страница, которую мы создадим, будет называться "О сайте". Обычно все приличные сайты имеют такую страницу; на ней может содержаться информация о том,  какой теме посвящен данный сайт, его структура, принципы, цели, предположительная аудитория, авторские права, контакты и др.</p>
<p>Для того, чтобы добавить контент в Drupal, нажмите в меню <span class="monoi">Создать публикацию</span> (или <span class="monoi">Создать материал</span>). Материалы сайта бывают разным по своему назначению и содержанию. Это может быть запись, основное назначение которой информировать посетителей сайта, ставить их перед фактом; или это может быть запись, предполагающая коллективное обсуждение (запись блога, например); или материал, главной частью которого является изображение или видеозапись; также бывает материал, представляющий собой коллекцию ссылок на другие материалы, объединенные по тому или иному признаку. От типа материала зависит, какие части могут быть у содержимого страницы. Поэтому форма создания каждого типа материала может иметь свои нюансы и особенности, но не обязательно. По умолчанию  в системе Drupal включены только два типа материала: <span class="monoi">Page</span> (страница) и <span class="monoi">Story</span> (заметка, рассказ). По своей структуре эти материалы ничем не отличаются, но имеют разное смысловое назначение. Page предназначен для более "статичного" материала: того, который реже меняется. Такой тип как раза больше всего подходит для создания страницы "О сайте".</p>
<p>После выбора <span class="monoi">Page</span> перед вами откроется форма для заполнения. В поле <span class="monoi">Title</span> вписывается название статьи, в поле <span class="monoi">Body</span> – ее текст. Сочините и напишите два-три абзаца о вашем сайте. Теперь развернем раздел <span class="monoi">Параметры меню</span>. Название ссылки в меню может быть таким же, как ее заголовок, хотя может и отличаться (если заголовок статьи очень длинный, то ссылки в меню стараются сделать немного короче). Сложнее обстоит дело с выбором места расположения ссылки. На сайте может быть несколько меню. Есть те, которые уже созданы самой системой Drupal (Primary links, Secondary links), однако большинство меню вы будете создавать сами. Любое меню представляет собой блок, и как любой блок может быть отключено или расположено в любой области сайта. По умолчанию меню Primary links включено, его расположение зависит от темы (обычно где-нибудь вверху), а мы его не видим лишь потому, что на данный момент в нем нет ни одной ссылки. Оставим в списке Родительский пункт вариант <span class="monoi">Primary links</span> и сохраним материал.</p>
<p>После этого вы увидите, как выглядит готовая страница. Обратите внимание на адресную строку браузера, там будет значиться <span class="blue">developer.home/node/1</span>. Это адрес данной страницы. В системе Drupal принято статьи называть нодами (node). Не трудно догадаться, что следующая статься будет иметь адрес <span class="blue">developer.home/node/2</span>. Перейдите на главную страницу сайта (заметьте, что она осталась прежней) и затем щелкните по ссылке "О сайте", которая должна была появиться в верхней его части.</p>
<p>При написании статьи, скорее всего, вы создавали новые абзацы одним нажатием Enter. Так происходит во всех текстовых процессорах, но не в системе Drupal. Здесь один Enter означает разрыв строки (<span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>br<span style="color: #66cc66;">&gt;</span></code></span>), а два Enter – формирование абзаца (<span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>p<span style="color: #66cc66;">&gt;</span></code></span>).  Если вы посмотрите исходный код страницы, на которой расположена нода "О сайте", и найдете там свой текст, то увидите, что он весь обрамлен единственным контейнером <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>p<span style="color: #66cc66;">&gt;</span> … <span style="color: #66cc66;">&lt;</span>/p<span style="color: #66cc66;">&gt;</span></code></span>, внутри которого встречаются один-два тега <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>br/<span style="color: #66cc66;">&gt;</span></code></span>. Отредактируйте статью, нажав на кнопку <span class="monoi">Редактировать</span> (<span class="monoi">Изменить</span>) около ее названия: вставьте между абзацами пустые строки. Теперь снова посмотрите исходный код страницы, отметьте разницу.</p>
<p>Добавленная нами статья не появилась на главной странице сайта. Это связано с настройками типа материала Page: по умолчанию статьи туда не выводится. Но это вовсе не значит, что мы не может поместить на главную страницу какую-нибудь избранную статью. На странице редактирования материала раскройте раздел <span class="monoi">Параметры публикации</span> (он находится в конце). Установите флажок <span class="monoi">Помещать на главную</span> и сохраните материал. Теперь перейдите на главную страницу сайта; она изменилась: приглашение исчезло, появилась статья в урезанном виде (если конечно, она не слишком маленькая, тогда вы увидите ее целиком). Надо понимать, что это не сама нода, а лишь ее "представление", ссылка на нее. По мере добавления материала на сайт на главной странице сверху будут появляться ссылки и усеченные версии новых статей (если, конечно, для них установлен флажок Помещать на главную), а более старые будут опускаться вниз.<br />
Нода "О сайте" нам на главной странице не нужна, поэтому отредактируйте материал снова, убрав соответствующий флажок.</p>
<p>На странице <span class="monoi">Управление</span> в разделе <span class="monoi">Управление содержимым</span> выберите пункт <span class="monoi">Содержимое</span>. Перед вами откроется форма, позволяющая видеть, какие материалы есть на сайте, искать (фильтровать) материалы определенного типа, осуществлять с ним ряд действий. Эта страница бывает весьма полезна, если надо снять с публикации несколько статей или разместить их на главной странице. Редактировать каждую из них было бы достаточно трудоемко. Пока, как мы видим, на сайте существует только одна статья, так что пока нам здесь делать нечего.</p>
<p>Сайт будет блогом. Запись в блоге — это особый тип материала, это не Page и не Story. Включить тип материала <span class="monoi">Запись в блоге</span> можно на странице Модули (модуль Blog). Теперь при попытке создать материал, помимо страниц и историй, вам будет предложена возможность создать блоговую запись.</p>
<p>Создадим свою первую запись в блоге. В качестве материала можете взять статью "Краткая история языков программирования" (1). Поместите ее заголовок в поле <span class="monoi">Заголовок</span>, а все остальное в <span class="monoi">Содержимое</span>, разделите содержимое на абзацы и сохраните материал. Убедитесь, что усеченный материал статьи появился на главной странице, а адрес самой статьи — <span class="blue">developer.home/node/2</span>. </p>
<p>Статья получилась неоформленной, по-идее в ней должны быть подзаголовки (<span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>h2<span style="color: #66cc66;">&gt;</span></code></span> или <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>h3<span style="color: #66cc66;">&gt;</span></code></span>) и выделение терминов курсивом (<span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>em<span style="color: #66cc66;">&gt;</span></code></span>). Ничего нам не мешает отрыть статью на редактирование и прописать соответствующие теги. Однако сначала надо определиться с уровнем подзаголовков. Понятно, что они должны быть младше, чем основной заголовок статьи. Чтобы выяснить, какого он уровня, посмотрим исходный код страницы. Если заголовок статьи второго уровня, то логично будет выделять подзаголовки третьим уровнем. Заходим в редактирование, обрамляем подзаголовки в контейнер <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>h3<span style="color: #66cc66;">&gt;</span> … <span style="color: #66cc66;">&lt;</span>/h3<span style="color: #66cc66;">&gt;</span></code></span>, а термины — в <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>em<span style="color: #66cc66;">&gt;</span> … <span style="color: #66cc66;">&lt;</span>/em<span style="color: #66cc66;">&gt;</span></code></span>.</p>
<p>Сохранив статью, видим, что курсив сработал, а заголовки — нет. Об этом же свидетельствует и исходный код страницы: там нет тегов <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>h3<span style="color: #66cc66;">&gt;</span></code></span>. Почему? Давайте вернемся  на страницу редактирования и раскроем там раздел <span class="monoi">Формат ввода</span>. Здесь переключатель по умолчанию стоит на варианте <span class="monoi">Filter HTML</span>, а среди допустимых тегов нет тега <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>h3<span style="color: #66cc66;">&gt;</span></code></span>. Именно поэтому он не был интерпретирован. Переключитесь на вариант <span class="monoi">Full HTML</span> и сохраните изменения. Теперь заголовки третьего уровня есть. Хотя их вид может оставлять желать лучшего, но они все-таки есть.</p>
<p>Однако предпочтительнее использовать именно формат ввода Filter HTML, что связано с безопасностью сайта. Поэтому сделаем немного по-другому. Сначала снова включим вариант <span class="monoi">Filter HTML</span> для статьи, а затем перейдем на страницу <span class="monoi">Управление ? Форматы ввода</span> (находится в разделе <span class="monoi">Настройка сайта</span>). Здесь выберем <span class="monoi">Настроить</span> напротив <span class="monoi">Filter HTML</span>, а далее следует щелкнуть на кнопке <span class="monoi">Настройки</span> вверху. В поле <span class="monoi">Допускаются только следующие HTML теги</span> через пробел надо дописать тег <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>h3<span style="color: #66cc66;">&gt;</span></code></span> и сохранить изменения. Тем самым мы изменили сам фильтр.</p>
<p>Добавьте еще пару записей в блог: "Языки программирования. Общая характеристика" (2) и "Некоторые причины и тенденции развития языков программирования" (3). При этом   разметьте соответствующие части статей с помощью тегов HTML (списки - <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>ol<span style="color: #66cc66;">&gt;</span>, <span style="color: #66cc66;">&lt;</span>ul<span style="color: #66cc66;">&gt;</span></code></span>, усиление - <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>strong<span style="color: #66cc66;">&gt;</span></code></span>).</p>
<p>Посмотрите, как выглядит главная страница.</p>
  </div>
<div id="node-334" class="section-2">
  <h1 class="book-heading">Урок 4. Установка и настройка HTML-редакторов в Drupal</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<p>Как можно было заметить на прошлом уроке, при создании статей не удобно размечать текст тегами HTML вручную, особенно если текст большой и содержит много структурных элементов. Куда удобней, когда можно просто нажимать на кнопки, после чего в текст добавляются соответствующая разметка и оформление так, как это бывает, например, в текстовых процессорах. Действительно, в Drupal можно подключать модули, которые позволяют использовать определенные HTML-редакторы, или сам модуль является реализацией редактора. В web широкое распространение нашли несколько редакторов: например, CKEditor, BUEditor, TinyMCE и др.</p>
<p>Текстовые редакторы делят на два класса — это плоские редакторы и так называемые WYSIWYG-редакторы ("что видишь, то и получишь"). В последних пользователь не вписывает и не видит теги (коды) разметки и оформления, он сразу видит конечный результат. То, каким образом достигается такое представление, скрыто от глаз пользователя.</p>
<p>Мы рассмотрим пару разных редакторов.</p>
<h3>CKEditor</h3>
<p>CKEditor представляет собой HTML-редактор типа WYSIWYG. Скачать его можно с сайта <span class="blue">ckeditor.com</span> (страница <span class="blue">download</span>, далее выбрать загрузку обычного CKEditor). Сделайте это, сохраните и распакуйте архив в любом месте (например, на рабочем столе).</p>
<p>CKEditor – это отдельный проект, не имеющий отношения к Drupal. Поэтому, чтобы подключить данный редактор к системе Drupal был разработан специальный модуль, который также называется CKEditor. Любые модули Drupal загружаются с сайта <span class="blue">drupal.org</span>. Чтобы быстро найти необходимый модуль, на главной странице этого сайта в форме вверху следует вписать его название и ниже выбрать вариант <span class="monoi">Modules</span>, после чего нажать <span class="monoi">Search</span> (поиск). Далее появится страница с ссылками подходящими под запрос поиска. Скорее всего, CKEditor будет первым. Перейдя на страницу модуля, вы можете загрузить подходящую версию (ссылки на архивы находятся в конце страницы, зеленым цветом помечены стабильные версии). Загрузите и распакуйте модуль. При распаковке будьте осторожны: не перепутайте модуль и сам редактор, т.к. их каталоги называются однаково.</p>
<p>Установим редактор в модуль:</p>
<ol>
<li>Откройте каталог, где находятся файлы модуля. Там есть одноименный каталог <span class="blue">ckeditor</span>. Зайдите в него, здесь вы должны увидеть текстовый файл <span class="monoi">COPY_HERE.txt</span>.</li>
<li>Переместите сюда каталог <span class="blue">ckeditor</span> с редактором.</li>
</ol>
<p>Теперь необходимо переместить каталог-модуль <span class="blue">ckeditor</span> в файловую структуру системы Drupal (туда, где установлен сайт). Но куда именно? В каталоге <span class="blue">WebServers/home/developer.home/www</span> есть директория под названием <span class="monoi">modules</span>. В ней находятся файлы всех модулей, изначально включенных в систему Drupal. Теоретически, если мы сюда поместим новый модуль, то система его увидит, и он будет работать. Однако так делать не следует. Все сторонние модули, загруженные пользователем, правильней помещать в каталог <span class="blue">sites/all/modules</span>. Папки <span class="blue">modules</span> в каталоге <span class="blue">all</span> в Drupal 6 по умолчанию нет, поэтому создайте ее и переместите сюда ранее сформированный каталог с модулем CKEditor.</p>
<p>Теперь в браузере перейдите на страницу модулей вашего сайта. Там должен появиться модуль CKEditor, включите его. После этого на главной странице управления сайтом в разделе <span class="monoi">Настройка сайта</span> появится ссылка на страницу конфигурации редактора CKEditor. Данный редактор имеет множество настроек, которые мы не будем рассматривать. Как вы можете заметить, модули устанавливаются на английском языке; для их русификации следует посетить сайт <span class="blue">drupaler.ru</span>. Пока мы этого тоже делать не будем, т.к. далее не будем использовать CKEditor. </p>
<p>Создайте новый материал типа <span class="monoi">Запись в блог</span>. Когда откроется страница добавления материала, вы увидите, что к полю редактирования текста прикреплена панель инструментов, подобно тому, что мы наблюдаем в любом текстовом процессоре. Попробуйте набрать произвольный текст и оформить его с помощью кнопок. Имейте ввиду, что здесь абзац формируется единичным нажатием Enter, а не двойным, как в "голом" Drupal. Если вам неудобно набирать текст в узком поле, то нажмите кнопку <span class="monoi">Максимизировать</span> и редактор развернется на все окно. Если требуется посмотреть, какие теги HTML вставляет редактор, то следует нажать на кнопку <span class="monoi">Источник</span>. Здесь можно редактировать материал вручную.</p>
<p>Назовите созданный вами материал Test1 и сохраните его.</p>
<p>Поскольку мы будем использовать другой редактор, зайдите на страницу модулей и отключите CKEditor.</p>
<h3>BUEditor</h3>
<p>BUEditor представляет собой более простой редактор, хотя назвать его "плоским" сложно. Теги вставляются с помощью кнопок, хотя пользователь видит именно теги разметки, а не результат их интерпретации. Поэтому BUEdior не является wysiwyg-редактором. Преимущество этого редактора заключается в том, что он легко настраивается под нужды пользователя.<br />
Для того, чтобы установить в систему BUEditor достаточно загрузить с сайта <span class="blue">drupal.org</span> и распаковать в каталог <span class="blue">sites/all/modules</span> модуль bueditor. Далее его надо включить на странице модулей сайта (если эта страница уже была открыта, то перезагрузите ее).</p>
<p>Создайте публикацию Test2, исследуйте при этом возможности редактора. BUEditor не переопределяет установки Drupal: абзац формируется двойным нажатием Enter.</p>
<p>Теперь перейдем на страницу конфигурации редактора (<span class="monoi">Управление ? Настройка сайта ? BUEditor</span>). Мы не будем русифицировать этот модуль, т.к. здесь не так уж много настроек и в большей степени они интуитивно понятны. Страница настроек BUEditor разделена на две части — <span class="monoi">Available editors</span> (доступные редакторы) и <span class="monoi">Role-editor assignments</span> (назначение редакторов ролям). В последних версиях BUEditor по умолчанию существует четыре разновидности редактора – BBCode, Commenter, Default и Lab. Версию Default мы уже видели, когда создавали материал Test2. Commenter представляет собой урезанную версию Default. BBCode использует специфичный язык разметки похожий на HTML; перед отображением страницы система Drupal преобразует теги BBCode в теги HTML. В Lab многие кнопки вызывают функции, осуществляющие те или иные действия (например, поиск, замену, отмену действия и т.д.).</p>
<p>В разделе <span class="monoi">Role-editor assignments</span> мы видим три роли, которые существуют на данный момент в системе Drupal. Это user #1 (администратор системы), зарегистрированный и анонимный пользователи. Анонимный пользователь — это любой посетитель сайта, не зарегистрированный в системе. По умолчанию в Drupal анонимные пользователи не имеют даже прав оставлять комментарии. Зарегистрированный пользователь — это пользователь, представившийся системе, через форму Вход в систему (которую мы видели, когда выходили из своего аккаунта). Перед этим пользователь однажды должен был пройти процедуру регистрации самостоятельно или с помощью администратора системы. Как видно, зарегистрированному пользователю не назначен никакой редактор. Назначьте ему Commenter.</p>
<p>Поменяйте для user #1 редактор с Default на Lab. Откройте на редактирование ранее созданную статью (Test1 или Test2). Оцените возможности такого варианта редактора. После этого установите для администратора снова редактор Default.</p>
<p>Ранее было отмечено, что BUEditor легко настраивается под нужды пользователя. Давайте выясним, как это делается. Допустим, нам надо отредактировать вариант редактора Default. Для этого перейдем по ссылке <span class="monoi">Редактировать</span> напротив его названия. Перед нами откроются настройки редактора Default. Наибольший интерес представляет раздел <span class="monoi">Buttons</span>. Назначение столбцов понять не сложно. Создадим еще одну кнопку в этом редакторе, например, Table, генерирующую теги таблицы, с вложенными в нее тегами одной строки и двух ячеек. Внизу в строке подсвеченной красным цветом в столбце Заголовок пишем Table. В строке содержимого должен быть код HTML или вызов функции языка JavaScript.</p>
<p>Напишем для таблицы понятный нам код:<br />
<div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;"><span style="color: #66cc66;">&lt;</span>table<span style="color: #66cc66;">&gt;</span>
  <span style="color: #66cc66;">&lt;</span>tr<span style="color: #66cc66;">&gt;</span>
    <span style="color: #66cc66;">&lt;</span>td<span style="color: #66cc66;">&gt;&lt;</span>/td<span style="color: #66cc66;">&gt;</span>
    <span style="color: #66cc66;">&lt;</span>td<span style="color: #66cc66;">&gt;&lt;</span>/td<span style="color: #66cc66;">&gt;</span>
  <span style="color: #66cc66;">&lt;</span>/tr<span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span>/table<span style="color: #66cc66;">&gt;</span></pre></div></p>
<p>Поскольку для таблицы нет пока иконки, то вместо ее имени файла пропишите слово Table. Сохраните изменения. В поле <span class="monoi">Demo</span> должна появиться кнопка Table, посмотрите, как она работает.</p>
<p>Теперь осталось подготовить иконку (рисунок *.png обычно размером 20x20 пикселей) и положить ее в каталог <span class="blue">/sites/all/modules/bueditor/icons/</span>. После этого перезагрузите страницу настроек редактора Default и в выпадающем списке иконок выберите ваш рисунок, сохранив после этого изменения. Следует отметить, что кнопки можно перемещать относительно друг друга, настраивая тем самым их последовательность над формой ввода текста.</p>
<p>Удалите две созданные на этом уроке статьи, используя форму на странице <span class="monoi">Управление ? Управление содержимым ? Содержимое</span>.</p>
  </div>
<div id="node-336" class="section-2">
  <h1 class="book-heading">Урок 5. Адреса страниц. Регистрация пользователей и создание ролей</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<h3>Использование модуля Path</h3>
<p>Адреса страниц, которые мы создавали до этого, выглядели так: <span class="blue">доменное_имя/node/№_страницы</span> (например, <span class="blue">developer.home/node/4</span>). Для поисковых роботов это вполне приемлемый адрес, а вот людей он может отталкивать своей неинформативностью. Поэтому лучше, чтобы в адресах страниц был какой-нибудь намек на то, что содержится на данной странице. Например, если на странице речь идет о программировании, то логично, чтобы ее адрес выглядел примерно так: <span class="blue">developer.home/programming</span>.</p>
<p>Для того, чтобы можно было переименовывать адреса страниц, в системе управления содержимым Drupal надо включить модуль Path. После его включения на главной странице управления сайтом появится ссылка <span class="monoi">Синонимы</span> (в разделе <span class="monoi">Конструкция сайта</span>). Задавать собственные имена ссылкам можно здесь, но лучше это делать сразу при создании материала на странице его редактирования.</p>
<p>Перейдите на страницу <span class="monoi">Управление ? Управление содержимым ? Содержимое</span>. Здесь вы должны увидеть созданные вами ранее четыре страницы. Нажмите на ссылку <span class="monoi">Изменить</span> напротив страницы <span class="monoi">О сайте</span>. Откроется форма ее редактирования, где должен появиться новый раздел <span class="monoi">Параметры адреса</span>; раскройте его. В поле следует вписать новое имя страницы. Будьте внимательны, не надо писать полный адрес, <span class="blue">developer.home/</span> следует опустить. Впишите в поле слово about и сохраните изменения. Аналогичным образом переименуйте остальные страницы; задайте для них такие имена - history-programming, property-lang, evolution-lang. Перейдите на какую-нибудь из этих страниц, чтобы убедиться, адрес выглядит теперь иначе.</p>
<p>На самом деле у нас есть еще пара страниц, которые мы не создавали, но Drupal создал их автоматически. Поскольку мы создавали записи в блог, то была сгенерирована страница, где в хронологическом порядке перечисляются все записи в блог от всех пользователей. Ее адрес — <span class="blue">developer.home/blog</span>. Также должны существовать страницы блогов для каждого отдельного пользователя. Перейдите на главную страницу сайта и кликните по ссылке <span class="monoi">Блог пользователя — имя_пользователя</span>. Адрес страницы будет выглядеть следующим образом: <span class="blue">developer.home/blog/1</span>. Давайте переименуем этот адрес со страницы <span class="monoi">Управление ? Синонимы</span>. Нажмите кнопку <span class="monoi">Добавить синоним</span>, далее в поле <span class="monoi">Существующий системный путь</span> напишите <span class="blue">blog/1</span>, а в поле <span class="monoi">Синоним пути</span> — <span class="blue">blog/имя_пользователя</span> (вместо имя_пользователя впишите логин вашего пользователя). Сохраните изменения и перейдите на страницу блога пользователя, чтобы отметить изменения в адресе страницы.</p>
<h3>Пользователи</h3>
<p>Посетители сайта, не зарегистрированные в системе Drupal, называются анонимными пользователями. По умолчанию они не могут оставлять даже комментарии. Чтобы убедиться в этом, достаточно покинуть аккаунт администратора. Если в вашей операционной системе стоит два и более браузеров, то не выходите из аккаунта, а запустите другой браузер и откройте сайт. Здесь вы окажетесь в роли анонимного пользователя.</p>
<p>Разрешим всем посетителям сайта оставлять комментарии, но во избежание спама комментарии должны будут проходть модерацию (т.е. предварительный просмотр администратором сайта). Для этого перейдите на страницу <span class="monoi">Управление ? Управление пользователями ? Разрешения ролей</span>. В столбце <span class="monoi">анонимный пользователь</span> в разделе <span class="monoi">модуль comment</span> проставляем флажки <span class="monoi">иметь доступ к комментариям</span> и <span class="monoi">размещать комментарии</span>, далее сохраняем изменения. Теперь в окне другого браузера (где мы играем роль анонимного пользователя) перезагрузите страницу и оставьте комментарий к любой статье. (Обратите внимание, сначала происходит просмотр комментария, а уже потом его сохранение.) В результате вы получите сообщение, что ваш комментарий был отправлен на проверку, а сам комментарий вы не увидите.</p>
<p>Администратор системы, решивший заняться модерацией новых поступивших комментариев, должен перейти  на страницу <span class="monoi">Управление содержимым ? Комментарии ? Очередь на подтвержение</span>. Здесь каждый комментарий следует просмотреть (ссылка <span class="monoi">изменить</span>). Комментарии, содержащие спам и другие недопустимые вещи, следует удалить, остальные опубликовать. Опубликуйте пока единственный комментарий. В другом браузере перезагрузите страницу и отметьте его появление. </p>
<p>Анонимный пользователь по умолчанию может зарегистрироваться в системе Drupal. Попробуйте сделать это. Перед вами откроется форма, где нужно будет вписать имя и адрес электронной почты. Сайты Drupal, расположенные в Интернет на нормальных хостингах, высылают по почте пароли для пользователей. К сожалению Denwer этого не сделает. Но давайте все равно зарегистрируемся в системе, а пароль подправим со стороны администратора сайта на странице <span class="monoi">Управление пользователями ? Пользователи</span> (надо перейти по ссылке <span class="monoi">изменить</span> и вписать в поле <span class="monoi">Пароль</span> новый пароль). Теперь в другом браузере войдите в систему под только что зарегистрированным пользователем.</p>
<p>Зарегистрированные пользователи могут оставлять комментарии без предварительной модерации. Это не совсем хорошо, т.к. зарегистрироваться в системе может каждый, даже спамер или робот. Обычно с этим борются либо включая модерацию для зарегистрированных пользователей, либо устанавливая так называемую капчу, которая требует, например, при регистрации дополнительных действий от посетителя сайта. На странице <span class="monoi">Управление пользователями ? Разрешения ролей</span> снимите флажок размещать комментарии без проверки для зарегистрированного пользователя. Но и после этого на реально функционирующем сайте лучше ставить капчу, иначе в системе количество эфемерных пользователей будет расти в геометрической прогрессии. Удалять их можно со страницы <span class="monoi">Управление пользователями ? Пользователи</span>. Можно запретить посетителям регистрироваться самостоятельно вообще. Для этого нужно на странице <span class="monoi">Настройка пользователей</span> установить переключатель в позицию Только администраторы могут создавать новые учетные записи пользователей.</p>
<p>Когда регистрация пользователей на сайте не предполагается, бывает лучше отключить блок <span class="monoi">Вход в систему</span>. Отключите его и выйдите из своего аккаунта. Как теперь войти под своим логином на сайт? В CMS Drupal есть специальная страница с формой входа в систему: <span class="blue">домен_сайта/user</span>. Перейдите на эту страницу вашего сайта и войдите в систему через нее.</p>
<h3>Роли</h3>
<p>Посетители (пользователи) сайта могут выступать по отношению к сайту в разных ролях. Пока мы видели только три роли, присутствующие в Drupal по умолчанию. Администратор сайта — это особенная роль, которой позволительно все, что вообще возможно в CMS Drupal. Данная роль может принадлежать лишь одному аккаунту (одному человеку). Зарегистрированных и анонимных пользователей может быть любое количество, между собой они могут различаться своими возможностями (разрешениями) на сайте, которые настраиваются через страницу Разрешения ролей. </p>
<p>Но что делать, если существующих трех ролей недостаточно? Что, если на сайте должны быть как зарегистрированные пользователи, так и особые пользователи, осуществляющие проверку их комментариев и записей (модераторы). Или на сайте может содержаться материал, доступ к которому должен предоставляться только некоторым пользователям. В случае, когда возникают подобные задачи, администратор Drupal может создавать новые роли и назначать им соответствующие права.</p>
<p>Пусть наш сайт будет чем-то вроде многопользовательского блога. Допустим, два программиста ведут личные блоги на одном сайте. Требуется создать специальную роль, которая позволяла бы вести на сайте блог, а также создать пользователей, которым принадлежит эта роль. </p>
<p>Создать новую роль можно на странице <span class="monoi">Управление пользователями ? Роли</span>. Добавьте здесь роль "блогер", далее кликните по ссылке <span class="monoi">изменить права</span>. Разрешите блогеру следующее:</p>
<ul>
<li>создавать записи в блоге</li>
<li>удалять свои записи в блоге</li>
<li>редактировать свои записи в блоге </li>
<li>иметь доступ к комментариям</li>
<li>размещать комментарии без проверки </li>
<li>доступ к содержанию сайта</li>
<li>создание синонимов адресов страниц</li>
<li>иметь доступ к профилям пользователей </li>
<li>изменять свое имя пользователя</li>
</ul>
<p>Поскольку блогеры могут создавать записи, скорее всего, им понадобится HTML-редактор. Поэтому на странице настроек BUEditor следует назначить для роли "блогер" вариант редактора, например, Default.</p>
<p>У нас в системе уже есть один пользователь (помимо администратора) в роли зарегистрированного пользователя. Поменяем ему роль. Для этого на странице <span class="monoi">Пользователи</span> перейдите по ссылке <span class="monoi">изменить</span> напротив его имени. Откоется страница настроек этого пользователя, установите там флажок <span class="monoi">блогер</span> и сохраните изменения.</p>
<p>Теперь поменяем автора у всех ранее опубликованных статей, кроме страницы "О сайте". Пусть администратор сайта только управляет им и размещает информационные страницы, а блоговые записи делают только блогеры. Для этого на странице редактирования каждой статьи в разделе <span class="monoi">Информация об авторе</span> в поле <span class="monoi">Автор</span> впишите имя пользователя-блогера.</p>
<p>Создайте еще одного пользователя-блогера (<span class="monoi">Пользователи ? Добавить пользователя</span>). Зайдите под его аккаунтом и добавьте пару статей, например, "Что такое ядро операционной системы" и "Особенности ядер Unix-подобных операционных систем". Не забудьте назначать адресам страниц синонимы.</p>
  </div>
<div id="node-338" class="section-2">
  <h1 class="book-heading">Урок 6. Организация навигации по сайту. Создание меню и подшивок</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<p>Количество статей на сайте с течением времени будет увеличиваться. Чтобы было легко ориентироваться и без проблем находить то, что требуется, следует продумать удобную навигацию по сайту. То, как будет организовано меню сайта, как страницы сайта будут между собой связаны с помощью ссылок, играет важную роль, как для пользователей, так и для поисковых роботов. Для посетителей сайта важна понятность навигации, ее однозначность, а для поисковых систем — хорошая перелинковка. На каждую страницу сайта должна быть ссылка или из меню, или хотя бы с других страниц сайта.</p>
<p>Самое очевидное, что приходит в голову, это организовать доступ к материалам сайта с помощью меню. Пусть у нас будет меню со ссылками на блоги пользователей. На прошлом уроке мы забыли назначить синонимы для страниц блогеров. Адрес блога конкретного пользователя должен выглядеть так: <span class="blue">developer.home/blog/имя_пользователя</span>, где вместо <span class="blue">имя_пользователя</span> следует вписать логин блогера. Как вы помните, синоним можно добавить на странице <span class="monoi">Конструкция сайта ? Синонимы</span>.</p>
<h3>Создание меню</h3>
<p>Добавить новое меню на сайт можно на странице <span class="monoi">Конструкция сайта ? Меню</span>. Здесь следует нажать на кнопку <span class="monoi">Добавить меню</span> и в открывшейся форме вписать уникальное "машинное" имя меню (на английском языке) и его название (можно на русском). Обычно название меню отображается при его размещении на сайте. Также по желанию можно добавить описание меню. Создадим меню под названием "Блоги" (машинное имя: mnu-blogs).</p>
<p>После сохранения меню открывается страница со списком его пунктов. На данный момент здесь ничего нет. Добавим два пункта — ссылки на блоги пользователей. Нажимаем кнопку <span class="monoi">Добавить пункт</span>, в поле <span class="monoi">Адрес</span> вписываем <span class="blue">blog/имя_пользователя</span>, в поле <span class="monoi">Название ссылки в меню</span> — логин первого блогера. Вес влияет на последовательность ссылок в меню. Чем он меньше, тем ссылка выше. Если же у ссылок одинаковый вес, то они располагаются по алфавиту. Также добавьте в меню блог второго пользователя.</p>
<p>Несмотря на то, что меню было создано, на сайте оно так и не появилось. Когда создается меню, то автоматически вместе с ним создается блок для него. Именно размещение блока в определенной области сайта, открывает доступ к этому меню. Поэтому, чтобы все-таки меню появилось, нужно перейти на страницу <span class="monoi">Блоки</span>. Здесь в разделе отключенных блоков вы должны увидеть только что созданный блок меню. Разместите его в правой колонке. Кнопку <span class="monoi">Создано на Drupal</span> можно отключить. После сохранения изменений новое меню должно появиться. Перейдите по его ссылкам, чтобы удостовериться, что все было сделано правильно.</p>
<p>Следует отметить, что чаще ссылки на страницы добавляются в меню не так, как мы сейчас делали. Обычно это происходит в момент создания материала на странице его редактирования. При этом само меню уже должно быть создано заранее. Вспомните, как мы создавали ссылку на страницу "О сайте".</p>
<h3>Подшивка</h3>
<p>В CMS Drupal меню — это далеко не единственный способ организация навигации по материалам сайта. Одним из способов является использование так называемой подшивки, когда ссылки на определенные страницы располагаются вместе на главной для них странице. Обычно имеет смысл группировать таким образом  ссылки на статьи, которые связаны между собой одной темой и последующая страница является в каком-то смысле продолжением предыдущей.</p>
<p>Поскольку у нас на сайте слишком мало материала, будем использовать подшивку не совсем по ее назначению, а лишь с целью знакомства с возможностями. Пусть через подшивку будут организованы месяцы: на каждой странице подшивки будут объединены блоговые записи, которые были сделаны в одном определенном месяце.</p>
<p>Подшивка — это определенный тип материала. Чтобы он был доступен, надо включить модуль Book. После этого при создании публикации вы сможете выбрать пункт <span class="monoi">Страница подшивки</span>.</p>
<p>На странице управления в разделе <span class="monoi">Управление содержимым</span> появился пункт <span class="monoi">Подшивки</span>. Откройте настройки подшивки. В разделе <span class="monoi">Разрешенные в подшивке типы материалов</span> установлен флажок на пункте <span class="monoi">Страница подшивки</span>. Это значит, что в подшивку мы можем объединять другие подшивки и создавать целые деревья подшивок. Нам этого не надо. Поэтому устанавливаем флажок только на пункт <span class="monoi">Запись в блог</span>. Также запись в блог пусть будет дочерней страницей по умолчанию. Сохраните настройки.</p>
<p>Теперь создайте пустое меню "Архив подшивок" (mnu-archive) и расположите в правой колонке сайта под меню "Блоги". Оно не появится, т.к. пока в нем отсутствуют пункты меню.</p>
<p>Далее следует создать материал подшивки (<span class="monoi">Создать публикацию ? Страница подшивки</span>). В заголовок и название ссылки в меню впишем месяц, когда производились публикации на сайте. (Если публикации были добавлены в течение двух месяцев, то придется создать две подшивки.) Родительский пункт меню — <span class="monoi">Архив подшивок</span>. Ниже в разделе <span class="monoi">Оглавление подшивки</span> нужно выбрать <span class="monoi">Создать новую подшивку</span>. В качестве адреса страницы пропишите, например, <span class="blue">book/september</span>. Появится пустая страница и справа отобразиться новое меню.</p>
<p>Как администраторы системы Drupal давайте откроем любую статью на редактирование. Там в разделе <span class="monoi">Оглавление подшивки</span> выбираем только что созданную нами подшивку и сохраняем изменения. После чего на странице <span class="blue">developer.home/book/september</span> должен появиться пункт-ссылка на эту блоговую запись. </p>
<p>Если мы войдем в систему в роли блогера, то не сможем добавлять материалы к подшивке. Администратор сайта должен отредактировать разрешения ролей и позволить блогерам добавлять материалы к подшивке. Сделайте это. После этого зайдите на сайт под разными пользователями и отредактируйте материалы, добавив их в подшивку. В результате в подшивке месяца (если он один) у вас должно быть пять ссылок на статьи.</p>
<p>В конце добавьте от каждого пользователя еще по одной записи в блог (например, "Типы файлов в Linux" (6) и "Тестирование и отладка программ" (7)). При этом добавляйте записи со страницы подшивки, кликнув по ссылке <span class="monoi">Добавить дочернюю страницу</span>. В этом случае в разделе <span class="monoi">Оглавление подшивки</span> страницы редактирования материала сразу будет установлена подшивка текущего месяца.</p>
<p>Отметим недостатки такого способа организации материалов для нашего сайта (надо понимать, что в иных случаях подшивка может быть наилучшим выбором). Чтобы пользователи могли добавлять свои записи к подшивке, она заранее должна быть создана администратором сайта. Но и при этом блогер может забыть добавить статью к подшивке.  Обычно сайты существуют длительное время (больше года). Даже если каждую подшивку называть более конкретно (например, "Сентябрь 2011", "Октябрь 2011"), их количество будет сильно увеличиваться. Конечно, можно организовать месяцы в подшивку года, создав тем самым иерархическую структуру. Однако при этом пришлось бы решать еще ряд проблем.</p>
  </div>
<div id="node-339" class="section-2">
  <h1 class="book-heading">Урок 7. Таксономия и облако тегов</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<h3>Таксономия</h3>
<p>Навигацию по сайту можно организовать и через так называемую таксономию. Вообще таксономия — это учение, которое занимается классификацией и систематикой; изначально оно никак не связано с web, но термин и его значение прижились во Всемирной паутине.</p>
<p>Любую статью можно отнести к какой-нибудь теме. Если на сайте предусмотрена таксономия, то при создании статьи (например, записи в блог) пользователь обязан (или ему предлагается) выбрать из уже существующих или вписать новую тему, которой будет принадлежать данная запись. Для статей каждой темы движок Drupal формирует отдельные страницы, после чего на них можно устанавливать ссылки из меню. Т.е. если на прошлом занятии мы пытались классифицировать материал по месяцу публикации, то на этом уроке будем классифицировать по темам. В принципе правильно на сайтах-блогах предусмотреть обе классификации, т.к. в определенных случаях бывает удобнее искать материал по дате публикации, а в иных — по теме.</p>
<p>Допустим, на нашем сайте освещаются следующие темы: программирование, Python, Linux, web-технологии. Бывает строгая таксономия, когда статья может принадлежать только одной теме, но пусть у нас любая запись в блог может принадлежать или одной или сразу нескольким темам. При этом запись обязательно должна принадлежать хотя бы одной теме.</p>
<p>Также следует определиться с тем, может или нет пользователь (блогер, в нашем случае) сам добавлять новые термины таксономии при создании материала, если ему недостаточно существующих. Пусть у нас будет так, что он не может этого делать; термины таксономии будет создавать только администратор сайта.</p>
<p>Итак, перейдите на страницу <span class="monoi">Управление содержимым ? Таксономия</span>, нажмите кнопку <span class="monoi">Добавить словарь</span>. Заполните открывшуюся форму следующим образом:</p>
<ul>
<li><span class="monoi">Название словаря:</span> Темы</li>
<li><span class="monoi">Типы содержимого:</span> Запись в блог</li>
<li><span class="monoi">Настройки:</span> Множественный выбор, Обязательный</li>
</ul>
<p>Сохраните изменения. Теперь кликните по ссылке <span class="monoi">Добавить термины</span> напротив только что созданного словаря. По очереди добавьте термины (программирование, Python, Linux, web-технологии). После чего щелкните по кнопке <span class="monoi">Список</span> вверху, вы должны увидеть список созданных терминов.</p>
<p>Наведите мышку на термины и посмотрите их адреса URL в строке состояния внизу. Там значится примерно следующее: <span class="blue">developer.home/taxonomy/term/1</span>. Номера в конце адреса не очень информативны, поэтому назначим адресам страниц синонимы, заменив цифры на ключевое слово темы. Чтобы было удобно переименовывать, откройте несколько вкладок в браузере. Адреса страниц должны выглядеть так:</p>
<ul>
<li><span class="blue">developer.home/taxonomy/term/linux</span></li>
<li><span class="blue">developer.home/taxonomy/term/python</span></li>
<li><span class="blue">developer.home/taxonomy/term/programming</span></li>
<li><span class="blue">developer.home/taxonomy/term/web</span></li>
</ul>
<p>Если вы перейдете на любую из этих страниц, то увидите сообщение "В этой категории нет материалов". Когда мы добавляли статьи, то словаря таксономии еще не существовало, поэтому уже добавленные материалы не принадлежат ни одному термину словаря. Это несложно исправить. Поочередно откройте статьи на редактирование и выберите в списке Темы один или несколько терминов, которым может принадлежать заметка. Чтобы выбрать несколько тем, следует зажать Ctrl. Большинство ранее добавленных статей относятся к теме "Программирование". Чтобы перейти на эту страницу и посмотреть, как она выглядит щелкните по ссылке "программирование" внизу страницы любой из статей, которая принадлежит этой теме. Вы окажетесь на странице <span class="blue">taxonomy/term/programming</span>.</p>
<h3>Облако тегов</h3>
<p>Далее можно создать меню и привязать к нему страницы терминов, но мы поступим по-другому. Воспользуемся специальным модулем, который создает так называемое облако тегов. Облако тегов - это тоже меню, но своеобразного вида. Понятие "тег" совпадает или очень близко по значению с понятиями "термин, тема" и т.п.</p>
<p>С сайта <span class="blue">drupal.org</span> загрузите модуль Tagadelic и распакуйте его в каталог <span class="blue">sites/all/modules</span> системы Drupal. На странице модулей включите его. Если на сайте существуют словари таксономии, то Tagadelic автоматически создает блоки для них. Перейдите на страницу <span class="monoi">Блоки</span> и разместите блок <span class="monoi">Tags in Темы</span> в правой колонке сайта.</p>
<p>Скорее всего результат будет выглядеть не очень красиво. Облако тегов подразумевает, что термины, у которых больше статей, имеют более крупный шрифт. Поскольку у нас пока терминов мало, то "программирование" будет выглядеть гипертрофированно. Кроме того, как-то странно выглядит надпись над блоком (Tags in Темы). Кликните по ссыке <span class="monoi">настроить</span> напротив блока и впишите в поле <span class="monoi">Заголовок блока</span> одно слово — Темы.</p>
<p>Добавим еще ряд статей от имен двух блогеров. Это может сделать и под администратором сайта: при редактировании материала в разделе <span class="monoi">Информация об авторе</span> следует вписывать имя одного из существующих блогеров. При оформлении материала встречающийся программыный код помещайте в контейнер code, используйте таблицу там, где это необходимо (вспомните, мы создали кнопку в BUEditor для добавления табличных тегов; пользуйтесь ей; кроме того, следует добавить теги <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>table<span style="color: #66cc66;">&gt;</span>, <span style="color: #66cc66;">&lt;</span>tr<span style="color: #66cc66;">&gt;</span></code></span> и <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>td<span style="color: #66cc66;">&gt;</span></code></span> в формат ввода Filter HTML). Примеры статей для добавления:</p>
<ul>
<li>Направления развития и "эры" технологий Web (8)</li>
<li>Всемирная паутина и язык HTML (9)</li>
<li>Данные и операции над ними (10)</li>
<li>Условный оператор (11)</li>
<li>Права доступа к файлам в Unix-подобных операционных системах (12)</li>
</ul>
<p>При добавлении материала вы должны были заметить, что облако тегов не обновилось (новые термины не появились). Чтобы исправить ситуацию, достаточно запустить крон (например, со страницы <span class="monoi">Отчет о состоянии</span>).</p>
  </div>
<div id="node-341" class="section-2">
  <h1 class="book-heading">Урок 8. Установка и настройка тем оформления сайта</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<p>До сих пор мы использовали  поставляемую с системой Drupal тему с установленными по умолчанию настройками. Однако любой владелец web-ресурса желает, чтобы его сайт был оригинален и неповторим. Отчасти это достигается за счет web-дизайна. На этом уроке мы рассмотрим, как устанавливать и настраивать темы в CMS Drupal.</p>
<p>Темы, поставляемые с системой Drupal, хранятся в каталоге <span class="blue">themes</span> верхнего уровня его файловой структуры. Сторонние темы, которые администратор сайта загружает самостоятельно, настоятельно рекомендуют распаковывать в каталог <span class="blue">sites/all/themes</span>. В Drupal 6 каталога <span class="blue">themes</span> в папке <span class="blue">all</span> нет, поэтому необходимо его создать.</p>
<p>В большинстве тем предусмотрена возможность изменения некоторых стандартных настроек через интерфейс CMS Drupal. Когда администратор сайта меняет их, то в каталоге <span class="blue">sites/default/files</span> появляется папка, в которой сохраняются эти новые настройки. Обычно там среди прочего обязательно присутствует файл style.css. Проблема в том, что если вы будете вручную править этот файл, то потом в случае любого изменения настоек через интерфейс Drupal, он будет удален. Изменения, которые вы вручную вносите в файлы, содержащиеся в каталоге, где установлена сама тема, не изменяются при изменении настроек через интерфейс. Но тут появляется другая  проблема — при обновлении темы (когда выходит ее новая версия), вы теряете все ваши изменения. Поэтому, запомните два правила:</p>
<ol>
<li>Перед тем как вручную править тему, установите все необходимые вам настройки через страницу настроек темы в CMS Drupal.</li>
<li>В какой файл темы вы бы не вносили изменения, сохраняйте его, скопировав на локальный компьютер.</li>
</ol>
<p>Обо всем этом можно не заботиться, если не менять вручную никакие файлы темы, но в реальности такие ситуации бывают редко.</p>
<p>Откройте каталог <span class="blue">sites/default/files</span>. Если вы не меняли настройки темы Minnelli (которую мы используем), то каталог не должен содержать связанного с ней подкаталога. Теперь в браузере перейдите на страницу настроек темы Minnelli (на самом деле она является разновидностью темы Garland) и измените цветовую схему. Отметьте, что в каталоге <span class="blue">files</span> появилась папка <span class="blue">color</span>, а в ней каталог с измененными файлами темы. Еще раз измените цветовую схему, в <span class="blue">color</span> появится еще один каталог (первый можно удалить).</p>
<p>На нашем сайте используются логотип (картинка в верхнем левом углу сайта) и фавикон (иконка в адресной строке) самой системы Drupal. Очевидно, каждому приличному сайту требуется иметь свои личные логотип и фавикон, которые будут в сети Интернет отличать его от других. </p>
<p>Щелкните правой кнопкой мыши по логотипу сайта и выберите в контекстном меню пункт <span class="monoi">Свойства изображения</span>. Обратите внимание на его размеры: 64 х 73 пикселей. Примерно такое по размеру оригинальное изображение вам нужно будет создать самостоятельно в любом графическом процессоре. Вообще размер логотипа зависит от темы; часто бывает, что его размер не столь принципиален, т.к. тема способна "адаптироваться" под размеры изображения. Однако бывает, что изображение должно быть строго определенного размера. В данном случае вы можете строго не придерживаться оригинальной ширины картинки. Изображение лучше всего сохранить в формате PNG.</p>
<p>Для создания фавикона можно воспользоваться сайтом <span class="blue">favicon.ru</span>.</p>
<p>На странице настроек темы окончательно определитесь с цветовой схемой, снимите флажки <span class="monoi">Использовать логотип по умолчанию</span> и <span class="monoi">Использовать иконку по умолчанию</span>, укажите свои изображения и сохраните изменения.</p>
<p>Теперь в каталоге <span class="blue">colors</span> зайдите в только что сгенерированную папку. Откройте файл style.css на редактирование. Допустим, мы хотим изменить размер шрифта статей и немного подправить внешний вид заголовка третьего уровня. Найдите и исправьте следующие строки:</p>
<table>
<tr>
<th>Исходное описание стиля</th>
<th>Исправленное описание стиля</th>
</tr>
<tr>
<td>
<div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">h3 <span style="color: black;">&#123;</span>
  font-size: 140<span style="color: #66cc66;">%;</span>
<span style="color: black;">&#125;</span></pre></div>
</td>
<td>
<div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">h3 <span style="color: black;">&#123;</span>
  font-size: 140<span style="color: #66cc66;">%;</span>
  font-weight: bolder<span style="color: #66cc66;">;</span>
<span style="color: black;">&#125;</span></pre></div>
</td>
</tr>
<tr>
<td>
<div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">p <span style="color: black;">&#123;</span>
  margin: 0.6em 0 1.2em<span style="color: #66cc66;">;</span>
  padding: <span style="color: #ff4500;">0</span><span style="color: #66cc66;">;</span>
<span style="color: black;">&#125;</span></pre></div>
</td>
<td>
<div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">p <span style="color: black;">&#123;</span>
  margin: 0.6em 0 1.2em<span style="color: #66cc66;">;</span>
  padding: <span style="color: #ff4500;">0</span><span style="color: #66cc66;">;</span>
  font-size: 1.2em<span style="color: #66cc66;">;</span>
<span style="color: black;">&#125;</span></pre></div>
</td>
</tr>
</table>
<p>Если был увеличен размер шрифта абзацев, то, следовательно, должен быть увеличен размер шрифта маркированных и нумерованных списков, встречающихся в статьях. Однако изменение свойства font-size для всех списков приведет к искажению списков в меню. Чтобы изменить только списки в ноде, надо добавить в файл style.css, например, следующее определение стиля:<br />
<div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">.<span style="color: black;">node</span> ol, .<span style="color: black;">node</span> ul <span style="color: black;">&#123;</span>
	font-size: 1.2em<span style="color: #66cc66;">;</span>
<span style="color: black;">&#125;</span></pre></div></p>
<p>Файл style.css очень большой (более 1000 строк), кроме того, не всегда описание всех стилей сайта находится в одном файле. Чтобы найти описание внешнего вида того или иного элемента, пользуются специальными инструментами, например, дополнением Firebug для браузера Mozilla Firefox. Чтобы его установить, в браузере надо выбрать пункт меню <span class="monoi">Инструменты ? Дополнения</span>, найти firebug и установить его. Далее, открыв в браузере сайт, кликнуть по странице правой кнопкой мыши и в контекстном меню выберите пункт <span class="monoi">Анализировать элемент</span>. Внизу справа вы будете видеть стили и файлы, в которых они описаны.</p>
<p>Допустим, нас не устраивает ширина центральной части сайта (места, где располагается статься на странице). В Firefox щелкните правой кнопкой мыши по области сайта и в контекстном меню выберите <span class="monoi">Анализировать элемент</span>. (Обратите внимание, у сайта должно быть меню справа и слева.) Найдите тег <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>div <span style="color: #008000;">id</span>=<span style="color: #483d8b;">&quot;container&quot;</span> <span style="color: #ff7700;font-weight:bold;">class</span>=<span style="color: #483d8b;">&quot;clear-block&quot;</span><span style="color: #66cc66;">&gt;</span></code></span>. Справа вы увидите его ширину в 980px, файл и место в нем, где находится это описание. В данном случае оказывается, что ширина сайта определена в файле minnelli.css, расположенном в каталоге <span class="blue">themes/garland/minnelli</span>. Найдите этот файл, увеличьте все три свойства ширины (width) в нем, например, на 200px. </p>
<p>Теперь с сайта <span class="blue">drupal.org</span> (ссылка <span class="monoi">Themes</span>) скачайте несколько понравившихся вам тем. Обращайте внимание на версию темы, которую вы скачиваете. Если у вас Drupal 6, то тема для Drupal 7 на нем работать не будет. Далее создайте каталог <span class="blue">themes</span> в папке <span class="blue">sites/all</span> и распакуйте темы туда. Протестируйте их по очереди (страница <span class="monoi">Темы оформления</span>). Обратите внимание на то, какие области сайта присутствуют в каждой теме, является ли тема бестабличной и т.д.</p>
<p>После опытов снова примените для сайта тему Minnelli.</p>
  </div>
<div id="node-342" class="section-2">
  <h1 class="book-heading">Урок 9. Вставка изображений в статьи. Установка модуля для синтаксической подсветки кода</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<h3>Способы вставки изображений</h3>
<p>Публикуемые на сайтах статьи могут содержать различные изображения (фотографии, рисунки, скриншоты и т.д.). До сегодняшнего дня мы размещали на сайте лишь текст; рассмотрим, как добавлять в него изображения.</p>
<p>На языке HTML разметка изображения осуществляется тегом img с атрибутом src, у которого в качестве значения используется URL места размещения изображения. Возникает вопрос, где должно находиться изображение: в сети Интернет (на любом другом сайте) или на вашем собственном сайте (хостинге, где размещены файлы сайта)? Когда изображение размещено на других ресурсах, то все достаточно просто: копируем адрес рисунка (чтобы получить адрес изображения, в браузере щелкают по нему правой кнопкой мыши и выбирают <span class="monoi">Свойства изображения</span>) и вставляем его в тег img статьи на своем сайте. Если же мы хотим загрузить изображение на наш сайт, то существует как минимум два варианта: </p>
<ul>
<li>заранее загрузить "вручную" на сайт (например, по протоколу ftp или с помощью модуля upload), затем посмотреть адрес изображения и использовать его при добавлении тега img;</li>
<li>вставлять изображения в момент редактирования статьи, загружая их с помощью специального модуля в файловую структуру CMS Drupal. </li>
</ul>
<p>Второй вариант предпочтительнее, если вы не единственный, кто публикует материалы на сайте. Рассмотрим оба варианта.</p>
<p>Добавьте на ваш сайт от имени любого из блогеров статью, которая содержит два-три  изображения (но пока без них), например, "Цикл While" (13). Первый рисунок (while.png) разместим копированием/перемещением в файловую структуру Drupal; но куда? По логике вещей, если модули и темы, которые загружает администратор сайта, помещаются в каталог <span class="blue">sites/all</span>, то хорошо бы здесь же размещать изображения. Создадим каталог <span class="blue">sites/all/images</span> и переместим сюда один из рисунков. </p>
<p>Теперь откроем статью на редактирование, установим курсор в место, где должно быть это изображение и вставим тег img (можно воспользоваться соответствующей кнопкой BUEditor). Лучше указывать относительный адрес, т.к. в этом случае при смене доменного имени адрес все равно будет правильно указывать на местоположение рисунка. В результате тег должен выглядеть примерно так:</p>
<p><span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>img src=<span style="color: #483d8b;">&quot;sites/all/images/while.png&quot;</span> width=<span style="color: #483d8b;">&quot;605&quot;</span> height=<span style="color: #483d8b;">&quot;209&quot;</span> alt=<span style="color: #483d8b;">&quot;Цикл While&quot;</span> /<span style="color: #66cc66;">&gt;</span></code></span></p>
<p>Когда вы сохраните статью после редактирования, то не увидите изображения, т.к. <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>img<span style="color: #66cc66;">&gt;</span></code></span> не является допустимым тегом для формата ввода Filtered HTML. Добавьте <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>img<span style="color: #66cc66;">&gt;</span></code></span> в настройках этого фильтра. </p>
<p>Второе изображение будем добавлять с помощью специального модуля — IMCE. Загрузите его с сайта <span class="blue">drupal.org</span> и распакуйте в каталог <span class="blue">sites/all/modules</span>, после чего включите на странице Модули CMS Drupal. На странице <span class="monoi">Настройка сайта ? IMCE</span> назначьте для роли "блогер" профиль User-1. Теперь зайдем на сайт под блогером и попробуем вставить в статью второе изображение.</p>
<p>Нажмите на кнопку вставки изображения редактора BUEditor, там должна появиться кнопка <span class="monoi">Browse</span>. Нажмите ее, откроется окно файлового браузера IMCE. IMCE настроен так, что  открывает просмотр каталога <span class="blue">sites/default/files/</span>, куда многие модули сохраняют сгенерированные и загруженные с их помощью файлы. Конечно, лучше если администратор создаст здесь дополнительный каталог и настроит IMCE так, чтобы открывался именно он.</p>
<p>Для загрузки изображения в окне IMCE следует нажать кнопку <span class="monoi">Загрузить</span>, выбрать и загрузить изображение. После этого изображение появиться в основном окне IMCE, надо выделить его и нажать кнопку <span class="monoi">Send to editor</span>.</p>
<h3>Установка и использование GeSHi</h3>
<p>На сайте, который мы создаем, некоторые статьи содержат примеры программного исходного кода. Код принято помещать в контейнер тега code. Внешний вид, который принимает исходный код после этого, зависит от применяемого к нему стиля CSS. Если вы посмотрите на любую статью сайта на Drupal, содержащую пример исходного кода, то заметите, что шрифт внутри тега code отличается от основного шрифта. Т.е. сама тема CMS имеет описание стиля для этого тега. Несмотря на это есть ряд проблем. Исходный код легче читается, если выполнена его синтаксическая подсветка. Реализовывать это только с помощью языков HTML и CSS весьма трудоемкая задача. В исходном коде бывает важным наличие отступов от левого края строки. Например, в языке программирования Python отступы имеют синтаксический смысл. Как мы видим, тег code их не интерпретирует.</p>
<p>Проблему можно решить с помощью установки специального модуля, который отвечает за то, как отображается содержимое контейнера code. В системе Drupal широко используется модуль GeSHi Filter for syntax highlighting. Этот модуль позволяет использовать библиотеку GeSHi, которая должна быть также загружена в файловую структуру CMS Drupal.</p>
<p>Загрузите с сайта <span class="blue">drupal.org</span> модуль GeSHi Filter for syntax highlighting и распакуйте его в каталог <span class="blue">sites/all/modules</span>. C <span class="blue">sourceforge.net/projects/geshi/files/geshi/</span> загрузите саму библиотеку. Каталог geshi (библиотека) должен быть помещен внутрь каталога модуля geshifilter.</p>
<p>Откройте страницу <span class="monoi">Модули</span> сайта и включите только модуль Geshi Filter (GeSHi field и GeSHi node нам пока не нужны). Теперь его нужно настроить на странице <span class="monoi">Настройка сайта ? GeSHi Filter</span>. Здесь в поле <span class="monoi">Generic syntax highlighting tags</span> содержатся теги, которые будут "обрабатываться" модулем GeSHi Filter. В поле <span class="monoi">Default highlighting mode</span> (вариант подсветки по умолчанию) следует выбрать язык программирования, для которого будет выполняться подсветка синтаксиса, если используется тег code (или любой другой из указанных в поле <span class="monoi">Generic syntax highlighting tags</span>) без каких-либо атрибутов. Когда необходимый язык отсутствуют, то его можно включить на странице <span class="monoi">Настройка сайта ? GeSHi Filter ? Языки ? Отключено</span>. Перейдите на эту страницу и включите Pascal, после чего на странице <span class="monoi">Включено</span> пропишите тег для этого языка (<br />
<pascal>). Но на странице общих настроек GeSHi filter выберите в качестве варианта подсветки по умолчанию язык программирования Python и сохраните изменения.</pascal></p>
<p>Если вы теперь посмотрите на ранее созданную статью, содержащую тег code, то не увидите изменений. Дело в том, что для формата ввода Filtered HTML не включен фильтр GeSHi filter. Исправить этот недочет можно на странице <span class="monoi">Настройка сайта ? Форматы ввода ? Filtered HTML</span>. После этого подсветка кода сработает.</p>
<p>Когда в тексте статьи вам потребуется подсветка синтаксиса отличная от установленной по умолчанию, вместо тега <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>code<span style="color: #66cc66;">&gt;</span></code></span> следует прописать тег для требуемого языка (например, <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>pascal<span style="color: #66cc66;">&gt;</span></code></span>). При этом язык программирования должен быть предварительно включен на странице настроек GeSHi filter.</p>
  </div>
<div id="node-343" class="section-2">
  <h1 class="book-heading">Урок 10. Модуль Image. Создание галереи</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<p>На многих сайтах присутствуют так называемые галереи изображений, когда фотографии или рисунки группируются по категориям, а также организуется их удобный просмотр. Нечто подобное можно реализовать в CMS Drupal с помощью модуля Image.</p>
<p>Установите данный модуль в систему Drupal. На странице <span class="monoi">Модули</span> включите его подмодули Image и Image Gallery. Первый добавляет возможность создания еще одного типа материалов, а второй — возможность создавать галереи.</p>
<p>На главной странице управления сайтом выберите <span class="monoi">Управление содержимым ? Галерея картинок</span>. Добавим здесь несколько галерей, например, "Алгоритмы",  "Python", "Linux". Просматривая список, обратите внимание на адреса страниц галерей. Поменяйте их на странице <span class="monoi">Синонимы</span>: <span class="blue">image/linux, image/python, image/algorithm</span>.</p>
<p>Помимо страниц только что созданных галерей автоматически была сгенерирована еще одна страница, где перечислены все существующие галереи: <span class="blue">developer.home/image</span>. Посмотрите на нее. Добавим ссылку на эту страницу в меню Primary links через <span class="monoi">Меню</span> системы Drupal.</p>
<p>Теперь следует установить разрешения для ролей по отношению к модулю Image. Заходим на страницу <span class="monoi">Разрешения ролей</span> и устанавливаем для всех возможность смотреть оригиналы картинок, а для блогера — возможность создавать картинки, редактировать и удалять только свои картинки.</p>
<p>Галереи картинок создают отдельный словарь таксономии. В этом можно убедиться на странице <span class="monoi">Управление содержимым ? Таксономия</span>. Словарь Image Galleries содержит термины только что добавленных вами галерей изображений. На странице настроек данного словаря установите флажок <span class="monoi">Обязательный</span>, чтобы пользователь не смог забыть причислить загруженное им изображение к какому-нибудь термину.</p>
<p>Кроме того, благодаря модулю Tagadelic появляется блок Tegs in Image Galleries. Разместите этот блок в одной из колонок сайта, в качестве заголовка блока пропишите "Галереи изображений". Блок не появится, т.к. еще ни одно изображение не было добавлено.</p>
<p>От имени пользователей-блогеров сайта добавьте ряд изображений, например, <a href="http://younglinux.info/sites/default/files/galleries.rar" title="Картинки для галереи изображений">эти</a>. При создании публикации следует выбирать тип материала Image. Каждое изображение желательно кратко описать одним-двумя предложениями в разделе <span class="monoi">Содержимое</span> формы редактирования.</p>
<p>Примечание. При загрузке изображений в формате GIF возникает предупреждение.</p>
<p>Посмотрите галереи изображений, перейдя по ссылке в главном меню. Обратите внимание на ссылку <span class="monoi">Оригинал</span> под некоторыми изображениями. Она позволяет открывать изображение в его исходном размере. Чтобы появился блок тегов, надо запустить Cron.</p>
<p>При включении модуля Image в разделе <span class="monoi">Настройка сайта</span> появилась одноименная ссылка на страницу настроек данного модуля. Помимо прочего здесь можно поменять размеры создаваемых модулем миниатюр и картинок для предпросмотра. Однако делать это надо до загрузки изображений, т.к. рисунки сжимаются до необходимо размера в момент загрузки и при изменении настроек "разжаться" или "дожаться" уже не смогут. Так если, например, размер миниатюры будет увеличен уже после загрузки изображений, то все миниатюры будут выглядеть расплывчато.</p>
  </div>
<div id="node-346" class="section-2">
  <h1 class="book-heading">Урок 11. Создание видов</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<p>Страницы, содержащие не конкретные статьи, а коллекции материалов, по умолчанию в Drupal организованы наподобие дневников, когда более новые записи появляются вверху, а старые уходят вниз и на следующие страницы. Таким образом, например, организован внешний вид главной страницы и страниц терминов таксономии. Та начальная часть каждой статьи, которая отображается на странице-коллекции, называется аннотацией, анонсом и т.п. Длину анонса можно поменять на странице <span class="monoi">Настройки публикации</span>. Также здесь можно изменить количество публикуемых материалов на каждой странице-коллекции.</p>
<p>Часто бывает, что подобный внешний вид не устраивает владельцев сайта, они хотят или им требуется что-то особенное для их web-ресурса. Именно для таких случаев предназначен модуль Views (Виды). Загрузите и установите его в файловую структуру сайта; также с сайта <span class="blue">drupaler.ru</span> загрузите и установите файл перевода для данного модуля, т.к. сам модуль достаточно сложен и работа с ним и без того обычно малопонятна начинающим. Если вы экспортируете перевод в формате пакета, то после его разархивации переместите содержимое в папку модуля Views.</p>
<p>Включите следующие подмодули: Views и Views UI. Перейдите на страницу <span class="monoi">Конструкция сайта ? Представления</span>. Здесь уже есть несколько готовых представлений (включенные или нет). Включим представление frontpage, которое предназначено для формирования главной страницы, и перейдем на страницу его редактирования.</p>
<p>Перед вами откроется сложная форма с множеством настроек. Слева будут три вкладки — <span class="monoi">Default</span> (по умолчанию), <span class="monoi">Page</span> (Страница) и <span class="monoi">Feed</span>. Выберем Page, т.к. нам требуется настроить вид именно целой страницы. Затем в разделе <span class="monoi">Основные настройки</span> формы щелкните по значению <span class="monoi">нет</span> свойства <span class="monoi">Заголовок</span>. Внизу появится текстовое поле, куда можно вписать заголовок, который будет отображаться на странице. Впишите туда фразу "Новое на сайте". Обратите внимание на кнопку <span class="monoi">Переопределить</span>. Если ее не нажимать, то изменения затронут все представление, а не только Page. В данном случае нас это устраивает. Поэтому сразу нажимаем на кнопку <span class="monoi">Обновить отображение по умолчанию</span>.</p>
<p>Установите стиль в значение <span class="monoi">Таблица</span>, щелкнув по фразе <span class="monoi">Без форматирования</span>.</p>
<p>На странице надо что-то отображать. Это что-то определяется с помощью полей. Поле можно представить как определенную часть каждой статьи (материала). Например, поля — это заголовок, дата создания, автор, термин таксономии, к которому относится статья и т.д.<br />
Щелкните по плюсу рядом с разделом <span class="monoi">Поля</span>. Внизу появится список флажков — это поля, которые могут быть отображены в виде. Выберите следующее:</p>
<ul>
<li>Материал: Заголовок, </li>
<li>Материал: Дата создания, </li>
<li>Материал: Содержимое. </li>
</ul>
<p>Нажмите на кнопку <span class="monoi">Добавить</span>. В разделе <span class="monoi">Поля</span> появятся три поля, а ниже перед вами поочередно будут открываться настройки этих полей. Пока просто удалим из них метки и нажмем на кнопки <span class="monoi">Обновить отображение по умолчанию</span>.</p>
<p>В разделе <span class="monoi">Настройка страницы</span> адрес указан как <span class="blue">frontpage</span>. По умолчанию главная страница имеет адрес <span class="blue">node</span>. Можно либо поменять в настройках сайта, что главная страница будет не <span class="blue">node</span>, а <span class="blue">frontpage</span>. Либо непосредственно на странице редактирования представления поменять <span class="blue">frontpage</span> на <span class="blue">node</span>. Предпочтем второй вариант. После этого сохраните представление и посмотрите на главную страницу сайта (не уходите со страницы редактирования вида, лучше откройте вторую вкладку). Страница преобразилась, но вряд ли мы хотели именно такого вида: дата идет впереди заголовка, заголовок ничем не выделяется, а статьи представлены целиком. Продолжим редактировать вид Page представления.</p>
<p>Нажмите на кнопку с двумя стрелками рядом с разделом <span class="monoi">Поля</span>. Ниже появится форма <span class="monoi">Перестроить поля</span>. Поднимите заголовок выше даты создания, после чего нажмите на кнопку <span class="monoi">Обновить</span>. Теперь щелкните поле <span class="monoi">Материал: Заголовок</span>, в форме его редактирования установите флажок <span class="monoi">Заменить выводимое полем значением</span> и пропишите в многострочном текстовом поле <span class="geshifilter"><code class="python geshifilter-python"><span style="color: #66cc66;">&lt;</span>h3<span style="color: #66cc66;">&gt;</span><span style="color: black;">&#91;</span>title<span style="color: black;">&#93;</span><span style="color: #66cc66;">&lt;</span>/h3<span style="color: #66cc66;">&gt;</span></code></span>. Кроме того установите флажок <span class="monoi">Связать это поле с его материалом</span>. Сохраните изменения. Щелкните по полю <span class="monoi">Материал: Содержимое</span> и в его настройках установите флажок <span class="monoi">Установить для этого поля максимальную длину</span>. Пусть максимальная длина будет равна 400 символам.</p>
<p>Обратите внимание, что внизу вы можете видеть, как будет теперь выглядеть главная страница. </p>
<p>В основных настройках вида нажмите на кнопку с шестеренкой рядом со свойством <span class="monoi">Стиль</span>. Поменяйте колонку даты создания на <span class="monoi">Материал: заголовок</span>.</p>
<p>В свойстве <span class="monoi">Элементов на страницу</span> укажем значение 6. Сохраните представление и посмотрите, как выглядит главная страница.</p>
<p>Ранее мы решили кроме прочего организовать коллекции материалов по месяцам. Для этого пришлось создавать подшивку. На самом деле куда правильней использовать специальное представление. Поскольку многие сайты коллекционируют материалы по месяцам, то модуль Views уже включает в себя представление arсhive. Включите его и перейдите на страницу  редактирования.</p>
<p>У вида Page представления archive меняем стиль на табличный и добавляем следующие поля:</p>
<ul>
<li>Материал: Заголовок,</li>
<li>Материал: Дата создания, </li>
<li>Пользователь: Название, </li>
<li>Материал: Тип</li>
<li>Таксономия: Все термины. </li>
</ul>
<p>Устанавливаем последовательность полей такую, как приведена в списке. Сохраняем вид.</p>
<p>Откройте страницу <span class="monoi">Блоки</span> системы Drupal. В отключенных блоках появился новый блок <span class="monoi">Archive list</span>. Разместите его на сайте вместо блока <span class="monoi">Архив подшивок</span>. После этого посмотрите, как выглядят архивы месяцев.</p>
<p>Немного подредактируем представление. Щелкните по полю <span class="monoi">Материал: Заголовок</span> и установите флажок <span class="monoi">Связать это поле с его материалом</span>. Для <span class="monoi">Пользователь: Название</span> в метку впишите слово "Автор", а также снимите флажок <span class="monoi">Ссылаться на пользователя</span>. В основных настройках свойству <span class="monoi">Элементов на страницу</span> присваиваем значение <span class="monoi">Не ограниченно</span> (для этого следует прописать 0). Сохраните представление и посмотрите страницы архива.</p>
<p>Итак, модуль Views предоставляет возможность организовать материалы сайте не стандартным образом. Хотя в данном уроке мы использовали готовые представления, ничего не мешает вам создавать собственные. Следует знать, что возможности модуля Views намного превосходят рассмотренные на этом уроке.</p>
  </div>
<div id="node-347" class="section-2">
  <h1 class="book-heading">Урок 12. Модуль CCK – пакет для конструирования содержания материалов</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<p>При создании новой статьи пользователь сайта на Drupal определяет, к какому типу материала она будет относиться. Некоторые материалы, такие как Page и Story, включены изначально, другие активируются при включении соответствующих модулей, например, Book, Blog, Image. Однако ничего не мешает пользователю-администратору создавать собственные типы материалов под какие-нибудь специфические виды статей.</p>
<p>До этого мы видели, что формы редактирования всех типов материалов содержат примерно одинаковые поля: заголовок, меню, содержимое и другое. Хотя, например, тип "Картинки" имеет дополнительное поле для загрузки изображения. Но для какого-нибудь особенного типа материала этих полей может быть недостаточно. Например, может потребоваться поле, где будет указываться уровень статьи, какие-нибудь числовые значения, может потребоваться загрузка нескольких изображений и т.п. </p>
<p>В CMS Drupal можно добавлять собственные поля к материалам, как созданным собственноручно, так и тем, которые активируются при включении модулей. Для создания дополнительных полей используется модуль CCK (Content Construction Kit). Загрузите его с сайта <span class="blue">drupal.org</span>, установите в систему, также загрузите файл перевода с <span class="blue">drupaler.ru</span>.</p>
<p>Перейдите на страницу <span class="monoi">Модули</span> и включите следующие подмодули CCK – <span class="monoi">Content, Option Widgets, Text</span>. Также следует включить подмодуль модуля GeSHi – <span class="monoi">GeSHi field</span>, – который позволяет создавать поле исключительно для программного кода с подсветкой синтаксиса.</p>
<p>Допустим, на нашем сайте будут публиковаться решения задач по программированию. Для подобного материала хорошо бы создать собственный тип (не Story и не блоговую запись), т.к., скорее всего, он потребует поля нестандартного типа. Переходим на страницу <span class="monoi">Управление ? Типы содержимого ? Добавить тип содержимого</span>. В открывшейся форме в поле <span class="monoi">Название</span> вписываем "Задача", а в поле <span class="monoi">Тип</span> - "task", при желании можно заполнить поле описания типа. Далее раскройте раздел <span class="monoi">Свойства формы</span>, в поле <span class="monoi">Название</span> поля текста замените слово "Содержимое" на слово "Пояснение". Сохраните новый тип материала, после чего вы окажетесь на странице <span class="monoi">Управление ? Типы содержимого</span>. </p>
<p>Теперь необходимо настроить поля только что созданного типа. Для этого надо перейти по ссылке <span class="monoi">управлять полями</span> типа материала "Задача". К существующим стандартным полям добавим новое поле, в котором будет указываться язык программирования, на котором решена задача. Внизу страницы есть форма для добавления новых полей. Заполните ее следующим образом: в поле <span class="monoi">Метка</span> впишите "Язык программирования", в <span class="monoi">Имя</span> поля - "lang", тип данных и элемент — текст, текстовая строка. Нажмите на кнопку <span class="monoi">Сохранить</span>, откроются настройки данного поля. Здесь установите флажок <span class="monoi">Обязательный</span> и еще раз сохраните. После этого вы снова окажетесь на странице управления полями типа материала "Задача", где теперь в списке полей появится новое поле.</p>
<p>Следующее поле, которое нам потребуется, будет показывать, решена ли задача или еще нет. Добавляем такое поле: метка - "Задача решена", имя - "solved", тип — текст, элемент — флажки/радиокнопки. В настройках данного поля указываем: обязательный, список допустимых значений — "Да", "Нет" (каждое значение на отдельной строке).</p>
<p>Хотя исходный код решения задачи можно вставить в поле содержимого, но мы создадим специальное поле для кода. Метка - "Исходный код", имя — "source", тип — GeSHi field. Сохраним настройки поля как есть.</p>
<p>Теперь надо правильно выстроить последовательность полей, которую блогеры будут видеть в форме редактирования материала. Поля без проблем можно перемещать относительно друг друга. Расположите поля так, чтобы после <span class="monoi">Параметры меню</span>, сразу следовали поля в следующей последовательности <span class="monoi">Язык программирования, Задача решена, Пояснение, Исходный код</span>. Сохраните изменения.</p>
<p>Далее следует установить разрешения на странице <span class="monoi">Разрешение ролей</span>. Блогеру должно быть позволено create task content, delete own task content, edit own task content.</p>
<p>Кроме того, не забываем, что у нас на сайте поддерживается таксономия. Заходим на страницу таксономии. Здесь два есть два словаря - "Image Galleries" и "Темы". Нас интересует только второй, нажимаем <span class="monoi">изменить словарь</span> и в типах содержимого указываем помимо записи в блог еще и задачу. Сохранив изменения, добавляем еще один термин - "Решение задач". На странице списка терминов узнайте адрес страницы добавленного термина, после чего задайте для нее синоним <span class="blue">taxonomy/term/tasks</span>.</p>
<p>Наконец, создадим материал "Задача" от имени одного из блогеров. Примеры задач есть в архиве к данному курсу (файл tasks.odt). Обратите внимание, для поля  GeSHi field можно выбрать подходящий язык для синтаксической подсветки. Также в данном поле не надо использовать тег code.</p>
<p>После сохранения статьи может не понравиться то, что слова "Pascal" и "Да" расположены ниже заголовков "Язык программирования" и "Задача решена", а не рядом. Чтобы исправить это, перейдите на страницу <span class="monoi">Управление содержимым ? Задача ? Отображение полей</span>. Здесь в столбце <span class="monoi">Метка</span> полей "Язык программирования" и "Задача решена" установите значение <span class="monoi">В линию</span>.</p>
<p>Также можно обособить эти два поля от всего остального текста с помощью объединения их в отдельную группу. Для этого на странице модулей в CCK следует включить подмодуль Fieldgroup. Далее в управлении полями типа "Задача" создать новую группу, например "Информация о задаче" (taskinfo). Потом следует поднять только что созданное поле над полями "Язык программирования" и "Задача решена", а их как бы вставьте внутрь, немного сместив вправо. Чтобы название группы не отображалось, на странице отображения полей поставьте полю "Информация о задаче" метку <span class="monoi">Скрыто</span>.</p>
<p>Добавьте еще несколько задач. Запустите cron, чтобы увидеть ссылку на задачи из облака тегов.</p>
  </div>
<div id="node-348" class="section-2">
  <h1 class="book-heading">Заключение</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<p>Если бы сайт на локальном компьютере создавался не в учебных целях, и вы в последствие планировали бы разместить его в сети Интернет, то сайт нужно было бы правильно перенести на хостинг.</p>
<p>Самое ценное в сайтах, работающих на основе любой CMS, - это база данных. Ее потеря равноценна потери сайта. Поэтому важно всегда иметь ее свежую резервную копию. Чтобы экспортировать базу данных сайта надо зайти на панель управления phpMyAdmin (для Denwer – это <span class="blue">localhost/Tools/phpMyAdmin/</span>), выбрать в списке слева необходимую базу, а затем вверху найти вкладку или кнопку <span class="monoi">Export</span>. Вид интерфейса зависит от версии  phpMyAdmin. Во первых базу данных нужно сохранять в файл (Save as file); если она большая, выбрать способ сжатия (например, "zipped" или "gzipped"). Остальные настройки обычно трогать не надо. Далее следует непосредственно выполнить экспорт, нажав на кнопку, допустим, <span class="monoi">Go</span>. В результате вы получите файл с расширением sql, gz или др.</p>
<p>Следует иметь в виду, что, если перед экспортом базы данных выполнить через интерфейс Drupal скрипт ее обновления (<span class="blue">update.php</span>), то размер базы уменьшится.</p>
<p>На хостинге данные надо импортировать. Для этого предварительно требуется создать базу данных и пользователя. Обычно это делается на панели управления хостингом. На данном этапе важно запомнить имя пользователя, его пароль и название базы данных. Далее следует перейти на панель  phpMyAdmin (обычно ссылка на нее есть в панели управления хостингом), выбрать базу данных и через вкладку <span class="monoi">Import</span> загрузить ранее экспортированный файл данных. Могут быть проблемы с допустимым форматом для импорта, а также размером файла. Бывает, что при импорте базы данных может возникнуть ошибка, но такое бывает редко.</p>
<p>Сами файлы сайта на CMS Drupal также надо загрузить на хостинг по FTP или через менеджер файлов панели управления хостингом. При этом сам Drupal всегда можно взять с сайтов <span class="blue">drupal.org</span> и <span class="blue">drupal.ru</span>, а вот "пользовательские" файлы имеют особую ценность. Они также как и база данных составляют контент вашего сайта. Поэтому их надо также регулярно сохранять. Обычно в CMS Drupal все сторонние для него файлы находятся в каталоге <span class="blue">sites</span>, именно в один из его подкаталогов мы загружали дополнительные модули и темы. Также там хранятся изображения.</p>
<p>После загрузки файлов на хостинг надо изменить запись о базе данных и пользователе в файле <span class="blue">sites/default/settings.php</span> (т.е. эта строчка уже есть, надо ее найти и изменить, а не вписывать новую строчку). Например, если на хостинге вы создали пользователя myuser с паролем 3qi8cdp и базу данных mybase, то соответствующая строчка в файле должна принять следующий вид:</p>
<pre>$db_url = 'mysql://myuser:3qi8cdp@localhost/mybase';</pre><p>
Также на хостинге для файла settings.php важно оставить только право на чтение для владельца.</p>
  </div>
</div>
    
  </body>
</html>
