<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Установка нового ПО</title>
    <base href="" />
    <link type="text/css" rel="stylesheet" href="http://younglinux.info/misc/print.css" />
      </head>
  <body>
              <div class="section-1">
                <div class="section-2">
          
    <div id="node-272" class="section-3">
  <h1 class="book-heading">Установка нового ПО</h1>
  <p class="right">Introduction to Linux. A Hands on Guide —<br />
Введение в Linux. Руководство по работе</p>
<h3>Общее</h3>
<p>Большинство людей с удивлением видит, что у них после установки Linux оказывается рабочий, пригодный для использования компьютер; в большинстве дистрибутивов поддерживается большинство видео и сетевых карт, мониторов и других внешних устройств, так что, как правило, не требуется установка дополнительных драйверов. Кроме обычных инструментов, таких как офисные пакеты, веб-браузеры, электронная почта и другие программы в наиболее распространенные дистрибутивы включены  клиентские сетевые программы. Тем не менее, начальные установки могут не соответствовать вашим требованиям.</p>
<p>Если вы не можете найти то, что вам нужно, то может быть, это просто не установлено в системе. Также может случиться, что у вас есть необходимое программное обеспечение, но оно делает не то, что должно делать. Помните, что Linux быстро развивается, и программное обеспечение улучшается ежедневно. Не стоит тратить время  на устранение проблем, которые могут быть уже решены.</p>
<p>Вы можете обновить вашу систему или добавить пакеты в нее в любое время. Большинство программного обеспечения поставляется в пакетах. Дополнительное программное обеспечение может быть найдено на установочных компакт-дисках или в Интернете. Веб-сайт вашего дистрибутива Linux является хорошим местом для начала поиска дополнительного программного обеспечения и содержит инструкции о том, как установить что-то на ваш Linux, см. <a href="http://younglinux.info/#">Приложение A, Куда идти дальше?</a>. Всегда читайте документацию, которая поставляется с новой программой, т.к. там могут находиться какие-нибудь руководства по установке пакета. Все программное обеспечение поставляется с файлом <span class="mono">README</span>, который вам очень настоятельно рекомендуется к прочтению.</p>
<h3>Форматы пакетов</h3>
<h4>Пакеты RPM</h4>
<h5>Что такое RPM?</h5>
<p>RPM, RedHat Package Manager, представляет собой мощный менеджер пакетов, который вы можете использовать для установки, обновления и удаления пакетов. Он позволяет вам находить пакеты и отслеживает файлы, которые поставляются с каждым пакетом. Система построена таким образом, что вы можете проверить подлинность пакетов, скаченных из Интернета. Опытные пользователи могут создавать свои собственные пакеты RPM.</p>
<p>Пакет RPM состоит из архива файлов и метаданных, используемых для установки и удаления файлов архива. Метаданные включают вспомогательные скрипты, атрибуты файлов, и информацию со сведениями о пакете. Пакеты выпускаются в двух вариантах: бинарные, используется для упаковки программного обеспечения для установки, и пакеты с исходным кодом и предписанием, необходимым для создания бинарных пакетов.</p>
<p>Многие другие дистрибутивы поддерживают пакеты RPM, среди популярных - RedHat Enterprise Linux, Mandriva (бывший Mandrake), Fedora Core и SuSE Linux. Помимо советов для вашего дистрибутива, вы захотите прочитать <strong>man</strong> <span class="monoi">rpm</span>.</p>
<h5>Примеры работы с RPM</h5>
<p>Большинство пакетов просто устанавливаются при использовании опции обновления <span class="mono">-U</span>, и не важно установлен уже пакет или нет. Пакет RPM содержит полную версию программы, которая перезаписывает существующую версию или инсталлируется как новый пакет. Типичное использование выглядит следующим образом:</p>
<p><span class="mono">rpm -Uvh /path/to/rpm-package(s)</span></p>
<p>Опция <span class="mono">-v</span> генерирует более подробный вывод, <span class="mono">-h</span> заставляет <strong>rpm</strong> выводить индикатор прогресса установки:</p>
<pre>
[root@jupiter tmp]# <strong>rpm -Uvh totem-0.99.5-1.fr.i386.rpm</strong>
Preparing...                ########################################### [100%]
   1:totem                  ########################################### [100%]
[root@jupiter tmp]#
</pre><p>При этом новые пакеты ядра, устанавливаются с опцией <span class="mono">-i</span>, которая не перезаписывает существующую версию пакета. Таким образом, вы по-прежнему сможете загрузить систему со старым ядром, если новое окажется не рабочим.<br />
Вы также можете использовать rpm для проверки, установлен ли пакет в вашей системе:</p>
<pre>
[david@jupiter ~] <strong>rpm -qa | grep vim</strong>
vim-minimal-6.1-29
vim-X11-6.1-29
vim-enhanced-6.1-29
vim-common-6.1-29
</pre><p>
Или вы можете узнать, какой пакет содержит определенный файл или исполняемый файл:</p>
<pre>
[david@jupiter ~] <strong>rpm -qf /etc/profile</strong>
setup-2.5.25-1

[david@jupiter ~] <strong>which cat</strong>
cat is /bin/cat

[david@jupiter ~] <strong>rpm -qf /bin/cat</strong>
coreutils-4.5.3-19
</pre><p>
Заметьте, вам не нужно иметь доступ к административным привилегиям, чтобы использовать rpm для запроса к базе данных RPM. Аккаутн root требуется только при добавлении, изменении или удалении пакетов.<br />
Ниже приведен еще один пример, демонстрирующий, как удалить пакет при помощи <strong>rpm</strong>:</p>
<pre>
[root@jupiter root]# <strong>rpm -e totem</strong>
[root@jupiter root]#
</pre><p>Обратите внимание, что удаление по умолчанию происходит без подробностей, это нормально, что вы не видите многое из того, что происходит. Если вы сомневаетесь, используйте <strong>rpm</strong> <span class="mono">-qa</span> опять, чтобы убедиться, что пакет был удален.</p>
<p>RPM может делать гораздо больше, чем те несколько основных функций, которые мы привели здесь.</p>
<h4>Пакеты DEB (.deb)</h4>
<h5>Что из себя представляют пакеты Debian?</h5>
<p>Этот формат пакетов используется по умолчанию в Debian GNU/Linux, где <strong>dselect</strong>, и, в настоящее время все более распространенный, <strong>aptitude</strong> являются стандартными инструментами для управления пакетами. Они используются для выбора пакетов, которые вы хотите установить или обновить, но также работают во время установки системы Debian и помогают вам определить метод доступа для использования, список доступных пакетов и их настройки.</p>
<p>Веб-сайт Debian содержит всю необходимую информацию.</p>
<p>Формат пакетов Debian становится все более и более популярным. Также <strong>apt-get</strong> становится популярным на не-DEB системах.</p>
<h5>Примеры с инструментами DEB</h5>
<p>Проверка, установлен ли пакет, осуществляется с помощью команды <strong>dpkg</strong>. Например, если вы хотите узнать, какая версия Gallery установлена на вашем компьютере, то следует выполнить такую команду:</p>
<pre>
nghtwsh@gorefest:~$ <strong>dpkg -l *gallery*</strong>
Desired=Unknown/Install/Remove/Purge/Hold
| Status=Not/Installed/Config-files/Unpacked/Failed-config/Half-installed
|/ Err?=(none)/Hold/Reinst-required/X=both-problems (Status,Err: uppercase=bad)
||/ Name           Version        Description
+++-==============-==============-============================================
ii  gallery        1.5-1sarge2    a web-based photo album written in php
</pre><p>Префикс "ii" означает, что пакет установлен. Если вы увидите префикс "un", это означает, что пакет известен в списке, который поддерживает ваша система, но не установлен.</p>
<p>Поиск, какому пакету принадлежит файл, выполняется путем использования <span class="mono">-S</span> для <strong>dpkg</strong>:</p>
<pre>
nghtwsh@gorefest:~$ <strong>dpkg -S /bin/cat</strong>
coreutils: /bin/cat
</pre><p>
Больше информации можно найти на info-страницах <strong>dpkg</strong>.</p>
<h4>Пакеты с исходным кодом</h4>
<p>Наибольшая часть программ Linux является Free/Open Source, что означает, что  пакеты с исходными кодами доступны для этих программ. Исходники необходимы для компиляции собственного варианта программы. Истодные коды программы можно скачать с ее веб-сайта, обычно в виде сжатого архива (<span class="mono">program-version.tar.gz</span> или аналогичного). Для дистрибутивов, основанных на RPM, исходники часто поставляются как <span class="mono">program-version.src.rpm</span>. Debian и большинство дистрибутивов на его основе, предоставляют для себя адаптированные исходники, который можно получить с помощью <strong>apt-get <span class="monoi">source</span></strong>.</p>
<p>Особые требования, зависимости и инструкции по установке приведены в файле <span class="mono">README</span>. Вам, вероятно, понадобится компилятор с языка C <strong>gcc</strong>. Этот компилятор GNU входит в большинство систем Linux и портирован на множество других платформ.</p>
<h3>Автоматизация управления пакетами и обновлениями</h3>
<h4>Общие замечания</h4>
<p>Первое, что вы делаете после установки новой системы, - это обновляете ее; это относится ко всем операционным системам и Linux не исключение.</p>
<p>Обновления для большинства систем Linux обычно могут быть найдены на ближайшем сайте-зеркале вашего дистрибутива. Списки сайтов, предлагающих такую возможность, можно найти на веб-сайте вашего дистрибутива, см. <a href="http://younglinux.info/#">Приложение A, Куда идти дальше?</a>.</p>
<p>Обновления следует применять регулярно, если это возможно, то ежедневно, но можно начать с того, чтобы проводить обновление каждые несколько недель. Вы действительно должны стремиться к тому, чтобы иметь самую последнюю версию дистрибутива, так как Linux изменяется постоянно. Как было прежде отмечено, появление новых возможностей, улучшений и исправлений ошибок происходит регулярно, иногда решаются важные проблемы безопасности.</p>
<p>Хорошей новостью является то, что большинство дистрибутивов Linux предоставляют инструменты, поэтому вам не придется ежедневно обновлять десятки пакетов вручную. Следующие разделы дают обзор менеджеров пакетов. Это достаточно обширная тема, даже регулярные обновления пакетов с исходными кодами управляются автоматически; мы перечислим лишь наиболее широко известных системы. Всегда обращайтесь к документации для вашего конкретного дистрибутива для выяснения действий.</p>
<h4>APT</h4>
<p>Advanced Package Tool является системой управления пакетами программного обеспечения. Команда инструмента для обработки пакетов – <strong>apt-get</strong>, который поставляется с превосходной man-страницей, описывающей как установить и обновить пакеты или весь дистрибутив. APT зародился в дистрибутиве Debian GNU/Linux, где он по умолчанию является менеджером пакетов. Также APT был портирован для работы с пакетами RPM. Главное преимущество APT заключается в том, что он является свободным и гибким в использовании. Это позволит вам создать системы, подобные конкретным дистрибутивам (и в некоторых случаях коммерческие), перечисленные в следующих разделах.</p>
<p>Как правило, при первом использовании <strong>apt-get</strong>, вы должны будете получить индекс доступных пакетов. Это делается с помощью команды</p>
<p><span class="mono">apt-get update</span></p>
<p>После этого, вы можете использовать <strong>apt-get</strong> для обновления вашей системы:</p>
<p><span class="mono">apt-get upgrade</span> </p>
<p>Делайте это часто, это легкий способ сохранять вашу систему современной и, следовательно, безопасной.</p>
<p>Помимо этого общего пользования, <strong>apt-get</strong> также очень быстр для установки отдельных пакетов. Вот как это работает:</p>
<pre>
[david@jupiter ~] <strong>su - -c "apt-get install xsnow"</strong>
Password:
Reading Package Lists... Done
Building Dependency Tree... Done
The following NEW packages will be installed:
  xsnow
0 packages upgraded, 1 newly installed, 0 removed and 3 not upgraded.
Need to get 33.6kB of archives.
After unpacking 104kB of additional disk space will be used.
Get:1 <span class="geshifilter"><code class="python geshifilter-python">http://ayo.<span style="color: black;">freshrpms</span>.<span style="color: black;">net</span></code></span> redhat/9/i386/os xsnow 1.42-10 [33.6kB]
Fetched 33.6kB in 0s (106kB/s)
Executing RPM (-Uvh)...
Preparing...                ########################################### [100%]
   1:xsnow                  ########################################### [100%]
</pre><p>
Обратите внимание на опцию <span class="mono">-c</span> команды <strong>su</strong>, которая указывает, чтобы shell администратора выполнила только эту команду, а затем вернуться к среде пользователя. Таким образом, у вас не получится забыть осуществить выход из учетной записи суперпользователя.</p>
<p>Если существуют какие-либо зависимости от других пакетов, <strong>apt-get</strong> загрузит и установит эти вспомогательные пакеты.</p>
<h4>Системы, использующие пакеты RPM</h4>
<p>Update Agent, который изначально поддерживал только пакеты RPM RedHat, теперь перенесен на более широкий набор программного обеспечения, в том числе не-RedHat репозитории. Этот инструмент предоставляет полную систему для обновления RPM пакетов на системах RedHat или Fedora Core. Для обновления вашей системы в командной строке следует ввести <strong>up2date</strong>. На рабочем столе по умолчанию активируется маленький значок, говорящий вам, нет ли обновлений для вашей системы.</p>
<p>Yellowdog's Updater Modified (<strong>yum</strong>) является еще одним инструментом, который в последнее время стал достаточно популярным. Это интерактивная, но автоматически работающая программа для инсталляции, обновления или удаления пакетов RPM в системе. Этот инструмент выбран на системах Fedora.</p>
<p>В SuSE Linux, все это делается с YaST, Yet another Setup Tool, который поддерживает широкий спектр задач системного администрирования, среди которых и обновление RPM пакетов. Начиная с SuSE Linux 7.1 вы можете производить обновление также с помощью веб-интерфейса и YOU, Yast Online Update.</p>
<p>Mandrake Linux и Mandriva предоставлять так называемые URPMI инструменты, ряд программ-оберток, которые делают установку нового программного обеспечения проще для пользователя. Эти инструменты в сочетании с RPMDrake и MandrakeUpdate обеспечить все необходимое для упрощения установки и удаления пакетов программного обеспечения. MandrakeOnline предлагает расширенный спектр услуг и может автоматически уведомлять администраторов, когда обновления доступны для вашей конкретной системы. Помимо прочего посмотрите <strong>man</strong> <span class="monoi">urpmi</span> для дополнительной информации.</p>
<p>Также среды KDE и Gnome имеют собственные (графический) варианты пакетных менеджеров.</p>
<h3>Обновление ядра</h3>
<p>Большинство установок в Linux протекает без проблем, если вы периодически обновляете ваш дистрибутив. Процедура обновления при необходимости установит новое ядро и сделает все необходимые изменения в вашей системе. Вам придется компилировать или устанавливать новое ядро вручную, если вам нужны функции ядра, которые не включены в ядро вашего дистрибутива Linux по умолчанию.</p>
<p>Компилируете ли вы собственное оптимизированное ядро или используете предварительно скомпилированный пакет ядра, установите его так, чтобы старое и новое ядра существовали вместе, пока вы не убедитесь, что все работает как надо.</p>
<p>Затем создайте двойную загрузку системы, что позволит вам выбрать ядро для загрузки, обновив загрузочный конфигурационный файл <span class="mono">grub.conf</span>. Вот простой пример:</p>
<pre>
# grub.conf generated by anaconda
#
# Note that you do not have to rerun grub after making config changes. 
# NOTICE:  You have a /boot partition.  This means that
#          all kernel and initrd paths are relative to /boot/, e.g.
#          root (hd0,0)
#          kernel /vmlinuz-version ro root=/dev/hde8
#          initrd /initrd-version.img
#boot=/dev/hde
default=0
timeout=10
splashimage=(hd0,0)/grub/splash.xpm.gz
title Red Hat Linux new (2.4.9-31)
	root (hd0,0)
	kernel /vmlinuz-2.4.9-31 ro root=/dev/hde8
	initrd /initrd-2.4.9-31.img
title old-kernel
        root (hd0,0)
        kernel /vmlinuz-2.4.9-21 ro root=/dev/hde8
        initrd /initrd-2.4.9-21.img
</pre><p>
После того, как новое ядро окажется рабочим, вы можете удалить строки для загрузки старого из конфигурационного файла GRUB, хотя лучше подождать пару дней, просто чтобы быть уверенным.</p>
<h3>Установка дополнительных пакетов с установочных CD</h3>
<h4>Монтирование CD</h4>
<p>В основном это происходит так же, как и установка пакетов вручную, кроме того, вы должны добавить файловую систему CD к файловой системе вашего компьютера, чтобы сделать ее доступной. На большинстве систем, это будет сделано автоматически при вставке компакт-диска в привод, потому что во время загрузки запускается демон automount. Если ваш компакт-диск не становится доступным автоматически, выполните команду mount в окне терминала. В зависимости от вашей конкретной системной конфигурации, строка, подобная этой, обычно делает свое дело:</p>
<p><span class="mono">mount /dev/cdrom /mnt/cdrom</span></p>
<p>На некоторых системах только суперпользователь может монтировать сменные носители, это зависит от конфигурации.</p>
<p>Для того, чтобы все происходило автоматически, устройство для чтения CD обычно имеет запись в <span class="mono">/etc/fstab<span>, в котором перечислены файловые системы и их точки монтирования, в результате чего получается дерево файловой системы. Вот подобная строка:</span></span></p>
<pre>
[david@jupiter ~] <strong>grep cdrom /etc/fstab</strong>
/dev/cdrom	/mnt/cdrom	iso9660		noauto,owner,ro 0 0
</pre><p>
Это означает, что система будет понимать команду <strong>mount</strong> <span class="mono">/mnt/cdrom</span>. Опция <span class="mono">noauto</span> означает, что на этой системе компакт-диски не монтируются во время загрузки.</p>
<p>Вы даже можете попробовать щелкнуть правой кнопкой мыши на значке компакт-диска на рабочем столе для монтирования CD, если ваш файловый менеджер не сделает это за вас. Вы можете проверить, сработало ли это, с помощью команды mount без аргументов:</p>
<pre>
[david@jupiter ~] <strong>mount | grep cdrom</strong>
/dev/cdrom on /mnt/cdrom type iso9660 (ro,nosuid,nodev)
</pre><h4>Использование CD</h4>
<p>После монтирования CD, вы можете перемещаться по его каталогам, как правило, в точке монтирования <span class="mono">/mnt/cdrom</span>, где вы можете получить доступ к содержимому CD-ROM. Используйте те же команды для работы с файлами и каталогами, какие вы бы использовали для файлов на жестком диске.</p>
<h4>Извлечение CD</h4>
<p>Для того, чтобы вытащить компакт-диск из дисковода после того, как вы закончили использовать его, файловая система CD не должна использоваться. Даже нахождение в одном из подкаталогов точки монтирования, <span class="mono">/mnt/cdrom</span> в нашем примере, будет рассматриваться как "использование файловой системы", поэтому вам следует выйти оттуда. Сделайте это, например, введя <strong>cd</strong> без аргументов, эта команда вернет вас обратно в домашний каталог. После этого, вы можете использовать команду</p>
<p><span class="mono">umount /mnt/cdrom</span></p>
<p>или</p>
<p><span class="mono">eject cdrom</span></p>
<p class="note"><img src="../../../img/linuxintro/warning.gif" alt="" /><strong> Заблокированные диски</strong><br />
Никогда не применяйте силу к дисководу. Трюк со скрепкой является плохой идеей, и хотя это, в конечном итоге, выдернет CD, но ваша система будет думать, что CD по-прежнему там, т.к. обычные процедуры не были соблюдены. Скорее всего, вам придется перезагрузиться, чтобы привести систему в согласованное состояние.<br />
Если вы продолжаете получать сообщения "устройство занято", сначала проверьте, что все сессии shell вышли из файловой системы CD, а также графические приложения не используют его больше. Если есть сомнения, используйте инструмент <strong>lsof</strong>, чтобы убрать процесс(ы), которые продолжают использовать ресурсы компакт-диска.</p>
  </div>
    </div></div>
  </body>
</html>
