<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Урок 2. Перевод интерфейса, обновление и блоки сайта</title>
    <base href="" />
    <link type="text/css" rel="stylesheet" href="http://younglinux.info/misc/print.css" />
      </head>
  <body>
              <div class="section-1">
          
    <div id="node-332" class="section-2">
  <h1 class="book-heading">Урок 2. Перевод интерфейса, обновление и блоки сайта</h1>
  <p class="right">Создание сайта на Drupal 6. Практический вводный курс</p>
<h3>Перевод интерфейса</h3>
<p>Не очень удобно работать с системой, интерфейс которой на иностранном языке, если не очень хорошо знаешь язык и саму систему. Поэтому начинающим пользователям Drupal желательно установить перевод интерфейса на русский язык, так сказать, русифицировать систему. Перевод можно загрузить с сайта <span class="blue">drupaler.ru</span>. В верхней части этого сайта нажимаем кнопку <span class="monoi">Download</span>, выбираем <span class="monoi">Russian</span>. В поле <span class="monoi">Проект</span> набираем <span class="monoi">Drupal</span> и нажимаем <span class="monoi">Выбор проекта</span>. Далее следует выбрать релиз (версию) пакета перевода, он должен соответствовать версии системы Drupal, которую вы установили. В разделе <span class="monoi">Формат</span> переключите радиокнопку на вариант <span class="monoi">Все в одном файле</span>. Установить перевод интерфейса можно по-разному, но выберем самый простой. После нажатия кнопки Экспорт будет предложено сохранить файл (с расширением <span class="monoi">*.po</span>). Сохраните его пока в любом месте на вашем компьютере.</p>
<p>Теперь запустим Denwer и перейдем на страницу администрирования сайта. Если там поискать что-нибудь связанное с языками (что-то типа language) и переводом интерфейса (translate), то мы ничего не найдем. Следовательно, требуется включить дополнительную функциональность для сайта. Дополнительная функциональность обеспечивается модулями. Сам Drupal представляет собой в основном ядро, а разные модули как бы "прикручиваются" к нему, как какие-нибудь фичи, придающие сайту те или иные свойства и особенности.  Модулей существует огромное количество, лишь малая часть из них входит в поставку Drupal, остальные можно загрузить с сайта drupal.org. Каждый конкретный сайт использует ограниченное число модулей (что разумно), в зависимости от своих задач; но поскольку модулей много, то сайты, сделанные на Drupal, могут очень сильно отличаться между собой по своим возможностям. В этом заключается гибкость и настраиваемость CMS Drupal.</p>
<p>Итак, пока нам требуется включить возможность переводить интерфейс. Модуль, который это обеспечивает, уже входит в пакет Drupal. Поэтому сразу заходим в Modules и ищем там модуль Local, включаем его и сохраняем конфигурацию. Теперь на главной странице управления сайтом в разделе <span class="monoi">Site building</span> появился пункт <span class="monoi">Translate interface</span>, а в разделе <span class="monoi">Site configuration</span> — пункт <span class="monoi">Languages</span>.</p>
<p>Заходим в <span class="monoi">Translate interface</span> и выбираем <span class="monoi">Import</span>. В открывшейся форме указываем файл с переводом, загруженный ранее с сайта <span class="blue">drupaler.ru</span>, а также указываем язык перевода (<span class="monoi">Русский</span>) и нажимаем кнопку <span class="monoi">Import</span>. После чего в <span class="monoi">Site configuration</span> ? <span class="monoi">Languages</span> включаем радиокнопку <span class="monoi">Default</span> напротив русского языка. После сохранения конфигурации интерфейс станет русским.</p>
<h3>Cron, update.php</h3>
<p>Система управления содержимым Drupal регулярно требует проверки на наличие обновлений  для самой системы, ее модулей и тем. С этой целью надо с определенной периодичностью запускать так называемый Cron. Если он давно не запускался, то вы увидите сообщение на странице администрирования. Запустить Cron можно со страницы <span class="monoi">Модули</span>, либо <span class="monoi">Отчет о состоянии</span>. Свою работу Cron выполняет самостоятельно, ничего дополнительного вам делать не требуется. Зайдите в <span class="monoi">Отчет о состоянии</span> и кликните по ссылке <span class="monoi">запустить выполнение регулярных процедур</span>. Обычно этого достаточно.</p>
<p>Однако бывают ситуации, когда выходит новая версия модуля, самой системы Drupal или темы оформления. Тогда требуется удалить старую версию, загрузить новую и разместить ее  в соответствующем каталоге (на хостинге или локальном компьютере), где установлен Drupal. Если обновляется сам Drupal, то надо быть аккуратными при удалении; не удалить ничего лишнего, что не входит в пакет Drupal (сторонние модули, темы, загруженные изображения и др.). Поэтому настоятельно рекомендуется всё, что загружает пользователь (он же администратор сайта), хранить в отдельном каталоге CMS Drupal – <span class="blue">sites</span>. Там же (в <span class="blue">sites/default</span>) хранится такой важный файл, как <span class="monoi">settings.php</span>, с которым мы уже сталкивались при установке системы. В нем прописаны имя базы данных, имя пользователя базы данных и его пароль. Поэтому, размещая сайт в Интернете, устанавливайте для этого файла лишь право на чтение для владельца.</p>
<p>После включения новых и обновления старых компонентов сайта рекомендуется обновлять базу данных. Делается это с помощью скрипта <span class="monoi">update.php</span>, который расположен в корневой директории CMS Drupal. Найдите его в каталоге <span class="blue">WebServers\home\developer.home\www</span>. Чтобы его запустить, надо обратиться к нему через адресную строку браузера, например, так: <span class="blue">developer.home/update.php</span>. Можно прописать адрес вручную или перейти к этому файлу через страницу <span class="monoi">Модули</span> (<span class="blue">developer.home/admin/build/modules</span>), щелкнув там по ссылке <span class="monoi">update.php</span> (всегда читайте пояснения на страницах администрирования Drupal, система сама по себе хорошо документирована).</p>
<p>Также желательно запускать обновление базы данных перед ее экспортом. Это связано с тем, что после обновления размер базы уменьшается за счет удаления из нее временной информации.</p>
<p>Обновлять базу данных имеет право только администратор сайта. Чтобы в этом убедиться, выйдите из своего аккаунта (пункт <span class="monoi">Выйти</span> в меню) и попытайтесь запустить скрипт по адресу <span class="blue">developer.home/update.php</span>. Drupal вам сообщит, что доступ запрещен (access denied). Вернитесь в свой аккаунт и снова попробуйте запустить этот скрипт. Должно все получиться (на открывающихся страницах следует нажать <span class="monoi">Continue</span>, затем <span class="monoi">Update</span>).</p>
<h3>Блоки</h3>
<p>Как вы должно быть уже знаете, страницы сайта состоят из ряда областей, выполняющих свое определенное назначение. Так почти всегда у каждого сайта есть так называемая "шапка" - область вверху, где отображается его название и логотип; есть меню (только справа или только слева или по обеим сторонам); есть "подвал" - область внизу сайта; и есть самая большая центральная область, где располагают контент (текст) страниц. Бывает более сложная структура страниц сайта. Обычно шаблон страниц, также как и тема, применяется для всего сайта. И это правильно: было бы странно и неудобно ориентироваться на сайте, если бы на одной странице меню располагалось слева, а на другой вдруг переезжало вправо.</p>
<p>Чтобы увидеть какие структурные части (области) сайта есть, какие элементы (блоки) в них находятся, какие блоки можно еще добавить, надо перейти на страницу <span class="monoi">Блоки</span> (<span class="blue">developer.home/admin/build/block</span>).</p>
<p>Количество областей сайта, а также их названия определяются включенной темой сайта. Однако обычно всегда есть <span class="monoi">Содержимое, Левая колонка, Заголовок</span> и <span class="monoi">Подвал</span> (хотя они могут называться не обязательно именно так). Перемещать блоки между областями можно с помощью мыши (путем перетаскивания) или с помощью выпадающего списка. <em>Блоки</em> — это элементы сайта (меню, текстовые части, кнопки и др.). Блоки можно создавать и настраивать; некоторые модули автоматически создают блоки. Новые блоки сначала отключены.</p>
<p>Посмотрим, как обстоят дела у нас. В левую колонку помещены три блока: <span class="monoi">Вход в систему, Навигация</span> и <span class="monoi">Создано на Drupal</span>. Блок <span class="monoi">Вход в систему</span> мы видели, когда покидали свой аккаунт. <span class="monoi">Навигация</span> — это меню, настроенное изначально так, что его видит только администратор сайта; а <span class="monoi">Создано на Drupal</span> представляет собой кнопку со ссылкой на сайт <span class="blue">drupal.org</span>. Также существует ряд отключенных блоков, которые нам пока не нужны, а возможно будут не нужны никогда.</p>
<p>Давайте переместим кнопку <span class="monoi">Создано на Drupal</span> с левой колонки на правую, чтобы посмотреть, как изменится внешний вид сайта. Сохранив изменения, перейдите на главную страницу. Появилась правая колонка, но интересно отметить, что размер области, где располагается содержимое страницы, не изменился. Сайт стал шире, хотя на нем fixed-тема; просто fixed-размер стал другим, или, можно сказать, что он установлен только для области содержимого. Однако чаще бывает, что использование дополнительной области сужает область содержимого. Особенно критично это может быть как раз для fixed-тем. </p>
  </div>
    </div>
  </body>
</html>
