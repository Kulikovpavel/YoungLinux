<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Глава 11. Звук и видео</title>
    <base href="" />
    <link type="text/css" rel="stylesheet" href="http://younglinux.info/misc/print.css" />
      </head>
  <body>
              <div class="section-1">
          
    <div id="node-319" class="section-2">
  <h1 class="book-heading">Глава 11. Звук и видео</h1>
  <p class="right">Introduction to Linux. A Hands on Guide —<br />
Введение в Linux. Руководство по работе</p>
<h4>Аннотация</h4>
<p>В этой главе рассматривается решение следующих задачь (кратко, т.к. область звука и видео очень широка):</p>
<ul>
<li>Настройка звуковой карты</li>
<li>Воспроизведение компакт-дисков и их копирование</li>
<li>Воспроизведение музыкальных файлов</li>
<li>Регулирование громкости</li>
<li>Видео и телевидение</li>
<li>Запись звука</li>
</ul>
  <div id="node-320" class="section-3">
  <h1 class="book-heading">Базовая информация по звуку</h1>
  <p class="right">Introduction to Linux. A Hands on Guide —<br />
Введение в Linux. Руководство по работе</p>
<h3>Установка</h3>
<p>Скорее всего, ваша система уже установлена с аудио-драйверами, и конфигурация была выполнена во время установки. Также, если вам когда-нибудь понадобится  заменить аудио-оборудование, то большинство систем предоставляют инструменты, позволяющие легко выполнить установку и настройку устройства. Большинство имеющихся в настоящее время plug-and-play звуковых карт должны обнаруживаться автоматически. Если во время выполнения специальной утилиты настройки вы услышите звук, нажмите OK, и все будет выполнено за вас.</p>
<p>Если ваша карта не определяется автоматически, может быть предложен список звуковых карт и/или свойств звуковых карт, из которых можно выбирать. После этого вы должны предоставить правильный порт ввода/вывода, установки IRQ и DMA. Информацию об этих параметрах можно найти в документации к звуковой карте. Если на вашем компьютере также установлена MS Windows, то эту информацию можно найти в ее Панели управления.</p>
<h3>Драйверы и архитектуры</h3>
<p>Существуют два основных типа звуковой архитектуры: более древняя Open Sound System или OSS, которая работает в каждой UNIX-подобной системе, а также новая Advanced Sound Linux Architecture или ALSA, которая имеет лучшую поддержку для Linux, как следует из названия. ALSA также имеет больше функций и позволяет ускорить разработку драйверов. Мы сосредоточимся здесь на системе ALSA.</p>
<p>Сегодня поддерживаются почти все основные аудио-чипсеты. Лишь некоторые производители высоко профессиональных решений и обычных карт отказываются документировать свои спецификации чипсета, и они не поддерживаются.</p>
<p>Настройка системы, установленной с ALSA, осуществляется с помощью инструмента <strong>alsaconf</strong>. Кроме того, дистрибутивы обычно предоставляют свои собственные инструменты для настройки звуковой карты; эти инструменты могут даже включать старый и новый способ настройки звуковых устройств.</p>
  </div>
<div id="node-321" class="section-3">
  <h1 class="book-heading">Воспроизведение звука и видео</h1>
  <p class="right">Introduction to Linux. A Hands on Guide —<br />
Введение в Linux. Руководство по работе</p>
<h3>Проигрывание и копирование CD</h3>
<p>Пакет <em>cdp</em> поставляется с большинством дистрибутивов и предоставляет программу <strong>cdp</strong> или <strong>cdplay</strong>, текстовый проигрыватель компакт-дисков. Десктопные менеджеры обычно включают в себя графический инструмент, например, проигрыватель <strong>gnome-cd</strong> в Gnome, который может быть запущен из меню.</p>
<p>Надо понимать, что есть разница между аудио-дисками и CD с данными. Вам не надо монтировать аудио-CD к файловой системе, чтобы послушать его. Это связано с тем, что данные на таких CD не являются данными файловой системы  Linux; они сразу доступны и отправляются в канал аудио выхода проигрывателем компакт-дисков. Если же ваш CD является диском с данными, который содержит файлы <span class="mono">.mp3</span>, вам придется сначала примонтировать его к файловой системе и только потом слушать музыку с помощью одной из программ, которые мы перечислим ниже.</p>
<p>Утилита <strong>cdparanoia</strong> из одноименного пакета читает аудио непосредственно в виде данных с компакт-диска без аналогового преобразования и записывает их в файл или канал в различных форматах, в том числе <span class="mono">.wav</span>, как, вероятно, самый популярный. Различные инструменты для конвертирования в другие форматы, например, <span class="mono">.mp3</span>, поставляются с большинством дистрибутивов или загружаются  как отдельные пакеты. Проект GNU предоставляет несколько проигрывателей CD, программ для копирования, кодирования и управления звуком.</p>
<p>Очень легко создавать аудио-CD с помощью <strong>kaudiocreator</strong>, входящего в состав пакета KDE. Информация о нем есть в справочном центре KDE.</p>
<h3>Проигрывание музыкальных файлов</h3>
<h4>Файлы mp3</h4>
<p>Популярный формат <span class="mono">.mp3</span> поддерживается Linux. Большинство дистрибутивов включают несколько программ, которые могут воспроизводить такие файлы. Например, XMMS, который представлен на скриншоте ниже, является одним из наиболее распространенных, отчасти потому, что он похож на проигрыватель Windows.</p>
<p><strong>Рисунок 11.1. mp3-проигрыватель XMMS</strong><br />
<img src="../../../img/linuxintro/xmms.png" width="275" height="116" alt="mp3-проигрыватель XMMS в Linux" /></p>
<p>Также очень популярны для воспроизведения музыки AmaroK — приложение KDE, которое постепенно набирает популярность, и MPlayer, который также может воспроизводить фильмы.</p>
<p class="note"><img src="../../../img/linuxintro/note.gif" alt="" /><strong> Ограничения</strong><br />
Некоторые дистрибутивы не позволяют воспроизводить MP3 без изменения конфигурации, это из-за лицензионных ограничений на MP3-инструменты. Возможно, потребуется установить дополнительное программное обеспечение для проигрывания музыки.</p>
<p>В текстовом режиме вы можете использовать команду <strong>mplayer</strong>:</p>
<pre>
[tille@octarine ~]$ <strong>mplayer /opt/mp3/oriental/*.mp3</strong>
MPlayer 1.0pre7-RPM-3.4.2 (C) 2000-2005 MPlayer Team
CPU: Advanced Micro Devices Duron Spitfire (Family: 6, Stepping: 1)
Detected cache-line size is 64 bytes
CPUflags:  MMX: 1 MMX2: 1 3DNow: 1 3DNow2: 1 SSE: 0 SSE2: 0
Playing /opt/oldopt/mp3/oriental/Mazika_Diana-Krozon_Super-Star_Ensani-Ma-
Bansak.mp3.
Cache fill:  1.17% (98304 bytes)    Audio file detected.
Clip info:
Title: Ensani-Ma-Bansak.mp3
Artist: Diana-Krozon
Album: Super-Star
Year:
Comment:
Genre: Unknown
==========================================================================
Opening audio decoder: [mp3lib] MPEG layer-2, layer-3
mpg123: Can't rewind stream by 450 bits!
AUDIO: 44100 Hz, 2 ch, s16le, 160.0 kbit/11.34% (ratio: 20000->176400)
Selected audio codec: [mp3] afm:mp3lib (mp3lib MPEG layer-2, layer-3)
==========================================================================
Checking audio filter chain for 44100Hz/2ch/s16le -> 44100Hz/2ch/s16le...
AF_pre: 44100Hz/2ch/s16le
AO: [oss] 44100Hz 2ch s16le (2 bps)
Building audio filter chain for 44100Hz/2ch/s16le -> 44100Hz/2ch/s16le...
Video: no video
Starting playback...
A: 227.8 (03:23:.1) 1.8% 12%
</pre><h4>Другие форматы</h4>
<p>Это увело бы нас слишком далеко, если обсуждать все возможные форматы аудио и способы их воспроизведения. Неполный обзор распространенного ПО для воспроизведения звука и работы с ним:</p>
<ul>
<li>Ogg Vorbis: свободный формат аудио. Он был разработан из-за того, что MP3 оказался запатентован.</li>
<li><strong>realplay</strong></li>
<li>SoX или Sound eXchange: конвертер звука, поставляется с программой <strong>play</strong>. Проигрывает <span class="mono">.wav, .ogg</span> и других форматы, в том числе бинарные форматы.</li>
<li>Playmidi: MIDI-плеер.</li>
<li>AlsaPlayer: из проекта Advanced Linux Sound Architecture.</li>
<li><strong>mplayer</strong>: играет все, что угодно, в том числе mp3-файлы. </li>
<li><strong>hxplay</strong>: поддерживает RealAudio и RealVideo, mp3, mp4-аудио, Flash, wav и другие.</li>
<li><strong>rhythmbox</strong>: основанный на GStreamer фреймворк, может играть то, что поддерживается в GStreamer, который, как утверждается, способен играть все.</li>
</ul>
<p>Посмотрите вашу системную документацию и man-страницы для конкретных программ, там найдутся подробные разъяснения о том, как все это использовать.</p>
<p class="note"><img src="../../../img/linuxintro/note.gif" alt="" /><strong> У меня в системе нет этих приложений!</strong><br />
Большинство программ и приложений, упомянутых выше, являются дополнительным программным обеспечением. Вполне возможно, что они не установлены в системе по умолчанию, но вы можете их найти в вашем дистрибутиве в качестве дополнительных пакетов. Также может оказаться, что приложения, которое вы ищете, нет в вашем дистрибутиве вообще. В этом случае, вам необходимо скачать его с сайта программы.</p>
<h4>Регулятор громкости</h4>
<p><strong>aumix</strong> и <strong>alsamixer</strong> — это два распространенных текстовых инструмента для управления аудиосистемой. Для переключения настроек используются клавиши стрелок. <strong>alsamixer</strong> имеет графический интерфейс при запуске из меню Gnome или доступен как <strong>gnome-alsamixer</strong> из командной строки. Программа <strong>kmix</strong> делает то же самое в KDE.</p>
<p>Независимо оттого, что вы собираетесь слушать, помните, что могут быть и другие люди, которые не заинтересованы в том, чтобы слушать вас или ваш компьютер. Постарайтесь быть вежливыми, особенно в офисе. Используйте большие наушники. Так будет лучше для ваших ушей и вызывать меньше раздражения у ваших коллег.</p>
<h3>Запись</h3>
<p>Здесь также доступны различные инструменты, позволяющие записывать голос и музыку. Для записи голоса можно использовать <strong>arecord</strong> в командной строке:</p>
<pre>
alexey@russia:~> <strong>arecord /var/tmp/myvoice.wav</strong>
Recording WAVE '/var/tmp/myvoice.wav' : Unsigned 8 bit, Rate 8000 Hz, Mono
Aborted by signal Interrups...
</pre><p>"Interrupt" (прерывание) означает, что приложение поймало Ctrl + C. Проиграть  образец можно с помощью простой команды <strong>play</strong>.</p>
<p>Это хороший тест, который можно выполнить перед тестированием приложений, которым требуется голосовой ввод, таким как передача голоса по IP (VoIP). Имейте в виду, что микрофонный вход должен быть активирован. Если вы не слышите собственный голос, проверьте настройки звука. Часто случается, что микрофон отключен или находится на очень низкой громкости. Это может легко отрегулировать с помощью <strong>alsamixer</strong> или графического интерфейса для звуковой системы вашего дистрибутива.</p>
<p>В KDE можно запустить утилиту <strong>krec</strong>, Gnome предоставляет <strong>gnome-sound-recorder</strong>.</p>
  </div>
<div id="node-322" class="section-3">
  <h1 class="book-heading">Просмотр видео, каналов и телевидения</h1>
  <p class="right">Introduction to Linux. A Hands on Guide —<br />
Введение в Linux. Руководство по работе</p>
<p>Для этих целей доступны различные проигрыватели: </p>
<ul>
<li><strong>xine</strong>: свободно-распространяемый проигрыватель видео </li>
<li><strong>ogle</strong>: DVD-плеер</li>
<li><strong>okle</strong>: KDE версия <strong>ogle</strong> </li>
<li><strong>mplayer</strong>: Movie Player для Linux </li>
<li><strong>totem</strong>: воспроизведение аудио и видео файлов, аудио CD, VCD и DVD</li>
<li><strong>realplay</strong>: от RealNetworks. </li>
<li><strong>hxplay</strong>: альтернативный Real</li>
<li><strong>kaffeine</strong>: мультимедийный проигрыватель для KDE3.</li>
</ul>
<p>Скорее всего, вы найдете один из них в вашем графическими меню.<br />
Имейте в виду, что всех необходимых кодеков для просмотра различных типов видео может не быть в вашей системе по умолчанию. Вы можете загрузить w32codecs и libdvdcss.</p>
<p>Для просмотра телевидения можно выбрать среди следующих инструментов, которые, как и многие другие, подходят для просмотра и захвата ТВ-передач, видео и другого:</p>
<ul>
<li><strong>tvtime</strong>: великолепная программа с широкими возможностями управления, взаимодействия с телетекстом, режимами для фильмов и многим другим.</li>
<li><strong>zapping</strong>: программа для просмотра телепередач для Gnome.</li>
<li><strong>xawtv</strong>: X11 ТВ-вьювер.</li>
</ul>
  </div>
<div id="node-323" class="section-3">
  <h1 class="book-heading">Интернет-телефония</h1>
  <p class="right">Introduction to Linux. A Hands on Guide —<br />
Введение в Linux. Руководство по работе</p>
<h3>Что это?</h3>
<p>Интернет-телефония — это чаще всего передача голоса по IP (VoIP) или цифровая телефония, которая позволяет участникам обмениваться голосовыми данными по сети. Разница заключается в том, что потоки данных через сеть общего пользования Интернет отличаются от традиционной телефонии, которая использует выделенную сеть линий для передачи голоса. Хотя при особых обстоятельствах две сети могут быть между собой соединены, сейчас это не практикуется как стандарт. Другими словами, возможность связаться с людьми, которые используют обычный телефон, существует. Если это возможно, то скорее всего вам придется платить за подписку.</p>
<p>В настоящее время существуют различные приложения, доступные для бесплатного скачивания, как свободные, так и проприетарные. Но есть ряд недостатков телефонии через Интернет. Такая система ненадежна, она может работать медленно или в ней может проходить много шума по связи, и поэтому не может использоваться для замены традиционной телефонии. Хотя некоторые провайдеры принимают меры предосторожности, нет никакой гарантии, что вы дозвонитесь, куда вам надо.</p>
<p>Большинство приложений в настоящее время не используют шифрование, так что надо понимать, что кому-то достаточно легко подслушивать ваши разговоры. Если безопасность важна для вас, читайте документацию, которая поставляется с вашим клиентом IP-телефонии. Кроме того, если вы используете брандмауэр, он должен быть настроен на разрешение входящих соединений из любого места, так что использование VoIP также включает в себя принятие рисков на уровне безопасности сайта.</p>
<h3>Что вам нужно?</h3>
<h4>На стороне сервера</h4>
<p>Прежде всего, необходим провайдер предоставляющий такую услугу. Данный сервис может быть включен в традиционную телефонию, может быть платным или нет. Среди других есть SIPphone, Vonage, Lingo, AOL TotalTalk, также доступны технологии провайдеров, которые предлагают так называемый "полный телефонный сервис". Услуги интернет-телефонии предлагают Skype, SIP Broker, Google и многие другие.</p>
<h4>Клиентская сторона</h4>
<p>На стороне клиента, приложения, которые можно использовать, зависят от конфигурации сети. Если у вас есть прямое подключение к Интернету, то не будет никаких проблем, при условии, что вы знаете, к какому серверу можете подключиться, и, как правило, должны быть имя пользователя и пароль для аутентификации в сервисе.</p>
<p>Если вы находитесь за межсетевым экраном, который делает Network Address Translation (NAT), некоторые службы могут не работать, так как они будут видеть только IP-адрес брандмауэра, а не адрес вашего компьютера, который вполне может быть немаршрутизируемым через Интернет , например, когда вы находитесь в корпоративной сети, и ваш IP-адрес начинается с 10., 192.168. или иной немаршрутизируемого префикса подсети. Это зависит от протокола, который используется приложением.</p>
<p>Также блокирующим фактором может быть доступная пропускная способность: некоторые приложения, оптимизированы для низкого потребления пропускной способности, в то время как другие могут требовать высокую пропускную способность соединения. Это зависит от способа кодирования-декодирования, который используется приложением.</p>
<p>Самое известное приложение — это Skype, который имеет интерфейс, напоминающий обмен мгновенными сообщениями и X-Lite, бесплатную версию программного телефона XTen, который выглядит как мобильный телефон. Хотя эти программы доступны для бесплатной загрузки и популярны, они не свободны: они используют закрытые протоколы и/или доступны только в виде исполняемых файлов.</p>
<p class="note"><img src="../../../img/linuxintro/tip.gif" alt="" /><strong> Клиентское оборудование</strong><br />
Даже если на вашем компьютере, особенно ноутбуке, есть встроенный микрофон, результат будет намного лучше, если вы подключите гарнитуру. Если у вас есть выбор, выборайте в пользу USB-гарнитуры, т.к. она функционирует независимо от имеющегося аудио-оборудования. Используйте alsamixer для настройки входного и выходного уровня звука.</p>
  </div>
<div id="node-324" class="section-3">
  <h1 class="book-heading">Резюме</h1>
  <p class="right">Introduction to Linux. A Hands on Guide —<br />
Введение в Linux. Руководство по работе</p>
<p>На платформе GNU/Linux доступна полная мультимедийность. Поддерживается широкой спектр устройств, таких как звуковые карты, ТВ-карты, наушники, микрофоны, проигрыватели CD и DVD. Список доступных приложений является  бесконечным, поэтому ниже мы ограничились аудио-командами.</p>
<p><strong>Таблица 11.1. Новые команды в главе 11, связанные с аудио</strong></p>
<table>
<tr>
<td width="150"><strong>Команда</strong></td>
<td><strong>Значение</strong></td>
</tr>
<tr>
<td><strong>alsaconf</strong></td>
<td>Конфигурация звуковой системы ALSA</td>
</tr>
<tr>
<td><strong>alsamixer</strong></td>
<td>Настройка выходных уровней драйвера ALSA</td>
</tr>
<tr>
<td><strong>arecord</strong></td>
<td>Запись образцов звука</td>
</tr>
<tr>
<td><strong>aumix</strong></td>
<td>Инструменты аудио-миксера</td>
</tr>
<tr>
<td><strong>cdp</strong></td>
<td>Проигрывание аудио-CD</td>
</tr>
<tr>
<td><strong>cdparanoia</strong></td>
<td>Копирование компакт-дисков</td>
</tr>
<tr>
<td><strong>cdplay</strong></td>
<td>Проигрывание аудио-CD</td>
</tr>
<tr>
<td><strong>gnome-alsamixer</strong></td>
<td>Интерфейс ALSA для Gnome</td>
</tr>
<tr>
<td><strong>gnome-cd</strong></td>
<td>Интерфейс для проигрывания аудио-CD в Gnome</td>
</tr>
<tr>
<td><strong>gnome-sound-recorder</strong></td>
<td>Интерфейс для записи образцов звука в Gnome</td>
</tr>
<tr>
<td><strong>kaudiocreator</strong></td>
<td>Интерфейс KDE для создания аудио-CD</td>
</tr>
<tr>
<td><strong>kmix</strong></td>
<td>Интерфейс KDE для звуковых настроек</td>
</tr>
<tr>
<td><strong>krec</strong></td>
<td>Интерфейс для записи образцов звука в  KDE</td>
</tr>
<tr>
<td><strong>mplayer</strong></td>
<td>Проигрыватель мультимедиа</td>
</tr>
<tr>
<td><strong>play</strong></td>
<td>Инструмент командной строки для проигрывания образцов звука</td>
</tr>
</table>
  </div>
<div id="node-325" class="section-3">
  <h1 class="book-heading">Упражнения</h1>
  <p class="right">Introduction to Linux. A Hands on Guide —<br />
Введение в Linux. Руководство по работе</p>
<ol>
<li>В меню Gnome или KDE откройте панель настройки звука. Убедитесь, что колонки или наушники подключены к системе, и найдите уровень выходного сигнала, который вас устраивает. Убедитесь в том, что ваша система ALSA совместима, что вы используете соответствующую панель.</li>
<li>Если у вас есть микрофон, попробуйте записать образец вашего собственного голоса. Убедитесь, что входная громкость не слишком высокая, так как это приведет к высоким тонам, когда вы общаетесь с другими, или к передаче фонового шума. В командной строке, вы можете даже попытаться использовать <strong>arecord</strong> и <strong>aplay</strong> для записи и воспроизведения звука.</li>
<li>Найдите звуковые файлы в вашей системе и попробуйте послушать их.</li>
<li>Вставьте компакт-диск и попытаться воспроизвести его.</li>
<li>Найдите партнера в чате и настройте программу IP-телефонии. (Возможно, вам потребуется сначала ее инсталлировать.)</li>
<li>Вы можете слушать интернет-радио?</li>
<li>Если у вас есть DVD-плеер и фильм на диске DVD, попробуйте посмотреть его.</li>
</ol>
  </div>
</div>
    </div>
  </body>
</html>
