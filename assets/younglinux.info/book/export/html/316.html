<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Безопасность</title>
    <base href="" />
    <link type="text/css" rel="stylesheet" href="http://younglinux.info/misc/print.css" />
      </head>
  <body>
              <div class="section-1">
                <div class="section-2">
          
    <div id="node-316" class="section-3">
  <h1 class="book-heading">Безопасность</h1>
  <p class="right">Introduction to Linux. A Hands on Guide —<br />
Введение в Linux. Руководство по работе</p>
<h3>Введение</h3>
<p>Как только компьютер оказывается подключен к сети, то становится возможным его злонамеренное использование независимо от операционной системы, установленной на нем. Много слов написано на эту тему, и это завело бы нас слишком далеко, если бы мы стали обсуждать вопросы безопасности в деталях. Есть, однако, несколько довольно логичных вещей, которые может сделать даже начинающий пользователь, чтобы получить достаточно безопасную систему, потому что большинство взломов является результатом невежественности или беспечности пользователей.</p>
<p>Возможно, вы не знаете, относится ли это к вашему домашнему или рабочему компьютеру. Вопросы, которые вам следует задать себе, должны быть следующими:</p>
<ul>
<li>Вы хотите иметь контроль над собственной системой?</li>
<li>Хотите ли вы (невольно) участвовать в преступной деятельности?</li>
<li>Вы хотите, чтобы ваше оборудование использовалось кем-то другим?</li>
<li>Вы хотите иметь возможность потерять подключение к Интернет?</li>
<li>Вам нравится восстанавливать вашу систему каждый раз, когда она была взломана?</li>
<li>Вы хотите рисковать потерять личные или иные данные?</li>
</ul>
<p>Предположим, что вы всего этого не хотите; мы распишем несколько шагов, которые вы можете предпринять для защиты вашей машины.</p>
<h3>Службы</h3>
<p>Цель состоит в том, чтобы работало как можно меньше служб. Если количество портов, открытых для внешнего мира, было сведено к минимуму, то это облегчит слежение. Если службы не могут быть отключены в локальной сети, постарайтесь хотя бы отключить их для внешних подключений.</p>
<p>Эмпирическое правило таково, что если вы не узнаете конкретную службу, вы, вероятно, не нуждаетесь в ней. Также имейте в виду, что некоторые службы на самом деле не предназначены для использования через Интернет. Не полагайтесь на то, что запущено все, что должно быть запущено, проверьте, какие сервисы прослушиваются на  TCP-портах, используя команду <strong>netstat</strong>:</p>
<pre>
[elly@mars ~] <strong>netstat -l | grep tcp</strong>
tcp     0      0 *:32769                 *:*      LISTEN
tcp     0      0 *:32771                 *:*      LISTEN
tcp     0      0 *:printer               *:*      LISTEN
tcp     0      0 *:kerberos_master       *:*      LISTEN
tcp     0      0 *:sunrpc                *:*      LISTEN
tcp     0      0 *:6001                  *:*      LISTEN
tcp     0      0 *:785                   *:*      LISTEN
tcp     0      0 localhost.localdom:smtp *:*      LISTEN
tcp     0      0 *:ftp                   *:*      LISTEN
tcp     0      0 *:ssh                   *:*      LISTEN
tcp     0      0 ::1:x11-ssh-offset      *:*      LISTEN
</pre><p>Чего следует избегать:</p>
<ul>
<li><strong>exec, rlogin, rsh</strong> и <strong>telnet</strong> просто на всякий случай.</li>
<li>X11 на серверах.</li>
<li>Отсутствие lp, если ни один принтер физически подключен.</li>
<li>Нет MS Windows хостов в сети, не требуется Samba.</li>
<li>Не допускайте FTP, если сервер FTP не требуется.</li>
<li>Не позволяйте NFS и NIS через Интернет, отключите все сопутствующие службы на автономной установке.</li>
<li>Не запускать MTA, если вы не находитесь на почтовом сервере.</li>
<li>...</li>
</ul>
<p>Остановите запущенные службы с помощью команды <strong>chkconfig</strong>, скриптов init или путем редактирования конфигурационного файла <strong>(x)inetd</strong>.</p>
<h3>Регулярное обновление</h3>
<p>Способность быстро адаптироваться в постоянно меняющейся среде позволяет Linux процветать. Но это также создает вероятность того, что обновления безопасности выпускаются после того, как вы установили новую версию дистрибутива; поэтому первое, что нужно сделать (и это относится к любой ОС) после установки — получить и установить все доступные обновления. </p>
<p>Некоторые обновления могут потребоваться новые конфигурационные файлы, а старые файлы могут быть заменены. Проверьте документацию и убедитесь, что все работает нормально после обновления.</p>
<p>Большинство Linux дистрибутивов предлагают сервисы списков рассылки для уведомления об обновлении безопасности и инструменты для применения обновлений к системе. </p>
<p>Обновление представляет собой непрерывный процесс, поэтому происходит почти ежедневно.</p>
<h3>Брандмауэры и политики доступа</h3>
<h4>Что такое брандмауэр (фаервол)?</h4>
<p>В предыдущем разделе мы уже упоминали возможности брандмауэра (межсетевого экрана) в Linux. Хотя управление им является одной из задач вашего сетевого администратора, вы должны знать некоторые вещи о фаерволах.</p>
<p>Брандмауэр - не четко определенный термин, он может означать все, что действует как защитный барьер между нами и внешним миром, как правило, Интернет. Брандмауэр может быть встроенным в систему или отдельным приложением, которое обеспечивает подобную функциональность. Или это может быть сочетание компонентов, в том числе различные комбинации аппаратного и программного обеспечения. Межсетевые экраны построены из "правил", которые используются для определения того, чему позволено входить и/или выходить на данной системе или в сети.</p>
<p>После отключения ненужных служб, мы должны ограничить запущенные службы таким образом, чтобы позволить им только минимально необходимые соединения. Прекрасным примером является работа на дому:  должно быть разрешено только строго определенное соединение между вашими офисом и дом, соединения с другими машинами в сети Интернет должны быть заблокированы.</p>
<h4>Пакетные фильтры</h4>
<p>Первой линией обороны является пакетный фильтр, который может просматривать содержимое IP-пакетов и принимать решения исходя из их содержания. Самым популярным является пакет Netfilter, предоставляющий команду <strong>iptables</strong>, следующее поколение пакетных фильтров для Linux.</p>
<p>Один из самых примечательных усовершенствований в новых ядрах является способность проверять сохранность состояния, при этом сообщается не только о том, что находится внутри пакета, но и обнаруживается, если пакет принадлежит или связан с новым или существующим соединением.</p>
<p>Shoreline Firewall или Shorewall представляет собой интерфейс для доступа к стандартной функциональности брандмауэра в Linux.</p>
<h4>Обертки TCP</h4>
<p>Упаковка TCP обеспечивает во многом такие же результаты, как и фильтры пакетов, но работает по-другому. Обертка принимает попытки подключения, а затем проверяет файлы конфигурации и решает, следует ли принять или отклонить запрос на соединение. Она контролирует соединения на уровне приложений, а не на сетевом уровне.</p>
<p>TCP-обертки, как правило, используются с <strong>xinetd</strong> для предоставления имени хоста и основанном на IP-адресе управлении доступа. Кроме того, эти инструменты включают регистрацию и использование возможностей управления, которые легко настроить.</p>
<p>Преимущества оболочек TCP в том, что подключившийся клиент не знает, что используются обертки, и что они работают отдельно от приложений, которые они защищают.</p>
<p>На хосте доступ контролируется в файлах <span class="mono">hosts.allow</span> и <span class="mono">hosts.deny</span>. Более подробную информацию можно найти в файлах документации обертки TCP в <span class="mono">/usr/share/doc/tcp_wrappers[-<version>/]</version></span> или <span class="mono">/usr/share/doc/tcp</span> и в man-страницах для файлов контроля доступа хоста, там же содержатся примеры.</p>
<h4>Прокси</h4>
<p>Прокси-серверы могут выполнять различные задачи, и не все из них имеют непосредственное отношение к безопасности. Однако эти службы являются промежуточным звеном, которое делает прокси прекрасным местом для применения политики управления доступом, ограничения прямого соединения через брандмауэр и контроля того, как сеть после прохождения через прокси выглядит в Интернет.</p>
<p>Обычно в сочетании с пакетным фильтром, но иногда и сами по себе, прокси-серверы обеспечивают дополнительный уровень контроля. </p>
<h4>Доступ к отдельным приложениям</h4>
<p>Некоторые серверы могут иметь свои собственные средства контроля доступа. Например, Samba, X Window, Bind, Apache и CUPS. Для каждой службы используются определенные файлы конфигурации.</p>
<h4>Файлы журналов</h4>
<p>Во всяком случае UNIX-путь фиксации всех видов деятельности на всех видах файлов подтверждает, что "это что-то делает". Конечно, файлы журналов должны регулярно проверяться вручную или автоматически. Межсетевые экраны и другие средства контроля доступа, как правило, создают огромное количество log-файлов, так что проблема заключается в том, чтобы попытаться найти в них только ненормальную активность.</p>
<h3>Обнаружение вторжений</h3>
<p>Системы обнаружения вторжений (Intrusion Detection Systems - IDS) предназначены поймать то, что, возможно, пропустил брандмауэр. Они могут также быть предназначены для улавливания активной попытки взлома или для обнаружения уже свершившегося вторжения. В последнем случае уже слишком поздно, чтобы предотвратить любое повреждение, но по крайней мере мы осознали проблему на ранней стадии. Существуют два основных типа IDS: защищающие сети и защищающие индивидуальные хосты.</p>
<p>IDS хостов представляют собой утилиты, которые следят за файловой системой на предмет изменений. Системные файлы, которые так или иначе изменились, но не должны были меняться, привлекают к себе внимание. Это говорит о том, что кто-то вошел в систему с правами администратора, и вносит системные изменения. </p>
<p>Обнаруженное вторжений обрабатывается системой, которая видит весь трафик, который пропускает брандмауэр.</p>
<h3>Дополнительные советы</h3>
<p>Некоторые общеизвестные факты, которые следует иметь в виду:</p>
<ul>
<li>Не входите в систему как администратор. Разработчики UNIX более двух десятилетий назад придумали команду <strong>su</strong> для дополнительной безопасности.</li>
<li>Прямой доступ root всегда опасен и допускает человеческие ошибки, и не важно входите ли вы в систему как root или используете команду su. Поэтому вместо использования <strong>su</strong>, лучше использовать <strong>sudo</strong> для выполнения тех команд, которые требуют привилегий, и возвращаться потом к своей среде.</li>
<li>Относитесь к паролям серьезно. Используйте теневые пароли. Регулярно изменяйте пароли.</li>
<li>Старайтесь всегда использовать SSH или SSL. Избегайте <strong>telnet</strong>, FTP, E-mail клиентов и других клиентских программ, которые отправляют незашифрованные пароли по сети. Важно не только обеспечить безопасность вашего компьютера, но и безопасность ваших паролей.</li>
<li>Ограничьте ресурсы с помощью <strong>quota</strong> и/или <strong>ulimit</strong>.</li>
<li>Проверяйте подлинность нового ПО, берите его из надежного места/сайта. Проверьте новые пакеты перед установкой.</li>
<li>При использовании непостоянного подключения к Интернет, отключайте его, как только вам оно больше не нужно.</li>
<li>Запускайте личные службы на незанятых портах, а не тех, которые ожидают возможных атак хакеров.</li>
<li>Знайте вашу систему. Спустя какое-то время вы сможете почти чувствовать, когда что-то происходит.</li>
</ul>
<h3>Меня хакнули?</h3>
<p>Как вы можете об этом догадаться? Это контрольный список подозрительных событий:</p>
<ul>
<li>Таинственные открытые порты, странные процессы.</li>
<li>Системные утилиты (часто используемые команды) ведут себя странно.</li>
<li>Войти в систему проблемно.</li>
<li>Необъяснимое использование пропускной способности сети.</li>
<li>Поврежденные или отсутствующие файлы журналов, странное поведение демона syslog.</li>
<li>Интерфейсы в необычных режимах.</li>
<li>Неожиданно изменение конфигурационных файлов.</li>
<li>Странные записи в файлы истории оболочки.</li>
<li>Неизвестные временные файлы.</li>
</ul>
<h3>Восстановление после вторжения</h3>
<p>Итак, сохраняйте спокойствие. Затем выполните следующие действия в указанном порядке:</p>
<ul>
<li>Отключите компьютер от сети.</li>
<li>Постарайтесь выяснить, насколько это возможно то, каким образом безопасность была нарушена.</li>
<li>Создайте резервную копию важных несистемных данных. Если это возможно, сравните эти данные с существующими резервными копиями, сделанными до того как системы была взломана, для обеспечения целостности данных.</li>
<li>Переустановите систему.</li>
<li>Используйте новые пароли.</li>
<li>Восстановление резервные копии данных.</li>
<li>Примените все доступные обновления.</li>
<li>Пересмотреть систему: заблокируйте ненужные службы, проверьте правила брандмауэра и другие политики доступа.</li>
<li>Подключитесь к сети.</li>
</ul>
  </div>
    </div></div>
  </body>
</html>
