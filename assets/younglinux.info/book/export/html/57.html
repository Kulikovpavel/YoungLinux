<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ru" xml:lang="ru">
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Геометрические примитивы графического элемента Canvas (холст) модуля Tkinter. Урок 12</title>
    <base href="" />
    <link type="text/css" rel="stylesheet" href="http://younglinux.info/misc/print.css" />
      </head>
  <body>
              <div class="section-1">
          
    <div id="node-57" class="section-2">
  <h1 class="book-heading">Геометрические примитивы графического элемента Canvas (холст) модуля Tkinter. Урок 12</h1>
  <div style="text-align:center;">
<h4>Методическая разработка урока<br />
Элективный курс: Модуль tkinter. Создание графического интерфейса пользователя с помощью языка программирования Python<br />
Уровень: Программирование для начинающих</h4>
</div>
<p>Canvas (холст) — это достаточно сложный объект библиотеки tkinter. Он позволяет располагать на самом себе другие объекты. Это могут быть как геометрические фигуры, узоры, вставленные изображения, так и другие виджеты (например, метки, кнопки, текстовые поля). И это еще не все. Отображенные на холсте объекты можно изменять и перемещать (при желании) в процессе выполнения скрипта. Учитывая все это, canvas находит широкое применение при создании GUI-приложений c использованием tkinter (создание рисунков, оформление других виджет, реализация функций графических редакторов, программируемая анимация и др.).</p>
<p>В данном уроке будет рассмотрено создание на холсте графических примитивов (линии, прямоугольника, многоугольника, дуги (сектора), эллипса) и текста. </p>
<p>Для того, чтобы создать объект-холст необходимо вызвать соответствующий класс модуля tkinter и установить некоторые значения свойств (опций). Например:<br />
<div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">canv = Canvas<span style="color: black;">&#40;</span>root,width=<span style="color: #ff4500;">500</span>,height=<span style="color: #ff4500;">500</span>,bg=<span style="color: #483d8b;">&quot;lightblue&quot;</span>,
          cursor=<span style="color: #483d8b;">&quot;pencil&quot;</span><span style="color: black;">&#41;</span></pre></div> </p>
<p>Далее с помощью любого менеджера геометрии разместить на главном окне.</p>
<p>Перед тем как создавать геометрические фигуры на холсте следует разобраться с координатами и единицами измерения расстояния. Нулевая точка (0,0) для объекта Canvas располагается в верхнем левом углу. Единицы измерения пиксели (точки экрана). Для «ориентации в пространстве» объекта Canvas рассмотрите рисунок ниже. У любой точки первое число — это расстояние от нулевого значения по оси X, второе — по оси Y.</p>
<div style="text-align:center;"><img src="../../../img/tkinter/coords12.png" width="488" height="338" alt="Координатная ось с точкой отсчета вверху слева" /></div>
<p>Чтобы нарисовать линию на холсте следует к объекту (в нашем случае, canv) применить метод create_line.<br />
<div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">canv.<span style="color: black;">create_line</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">200</span>,<span style="color: #ff4500;">50</span>,<span style="color: #ff4500;">300</span>,<span style="color: #ff4500;">50</span>,width=<span style="color: #ff4500;">3</span>,fill=<span style="color: #483d8b;">&quot;blue&quot;</span><span style="color: black;">&#41;</span>
canv.<span style="color: black;">create_line</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">0</span>,<span style="color: #ff4500;">0</span>,<span style="color: #ff4500;">100</span>,<span style="color: #ff4500;">100</span>,width=<span style="color: #ff4500;">2</span>,arrow=LAST<span style="color: black;">&#41;</span> </pre></div></p>
<p>Четыре числа — это пары координат начала и конца линии, т.е в примере первая линия начинается из точки (200,50), а заканчивается в точке (300,50). Вторая линия начинается в точке (0,0), заканчивается — в (100,100). Свойство fill позволяет задать цвет линии отличный от черного, а arrow – установить стрелку (в конце, начале или по обоим концам линии).</p>
<p>Метод create_rectangle создает прямоугольник. Аналогично линии в скобках первыми аргументами прописываются четыре числа. Первые две координаты обозначают верхний левый угол прямоугольника, вторые — правый нижний. В примере ниже используется немного иной подход. Он может быть полезен, если начальные координаты объекта могут изменяться, а его размер строго регламентирован.</p>
<p><div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">x = <span style="color: #ff4500;">75</span>
y = <span style="color: #ff4500;">110</span>
canv.<span style="color: black;">create_rectangle</span><span style="color: black;">&#40;</span>x,y,x+<span style="color: #ff4500;">80</span>,y+<span style="color: #ff4500;">50</span>,fill=<span style="color: #483d8b;">&quot;white&quot;</span>,outline=<span style="color: #483d8b;">&quot;blue&quot;</span><span style="color: black;">&#41;</span></pre></div> </p>
<p>Опция outline определяет цвет границы прямоугольника.</p>
<p>Чтобы создать произвольный многоугольник, требуется задать пары координат для каждой его точки.<br />
<div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">canv.<span style="color: black;">create_polygon</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">250</span>,<span style="color: #ff4500;">100</span><span style="color: black;">&#93;</span>,<span style="color: black;">&#91;</span><span style="color: #ff4500;">200</span>,<span style="color: #ff4500;">150</span><span style="color: black;">&#93;</span>,<span style="color: black;">&#91;</span><span style="color: #ff4500;">300</span>,<span style="color: #ff4500;">150</span><span style="color: black;">&#93;</span>,fill=<span style="color: #483d8b;">&quot;yellow&quot;</span><span style="color: black;">&#41;</span> </pre></div></p>
<p>Квадратные скобки при задании координат используются для удобочитаемости (их можно не использовать). Свойство smooth задает сглаживание.</p>
<p><div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">canv.<span style="color: black;">create_polygon</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">250</span>,<span style="color: #ff4500;">100</span><span style="color: black;">&#93;</span>,<span style="color: black;">&#91;</span><span style="color: #ff4500;">200</span>,<span style="color: #ff4500;">150</span><span style="color: black;">&#93;</span>,<span style="color: black;">&#91;</span><span style="color: #ff4500;">300</span>,<span style="color: #ff4500;">150</span><span style="color: black;">&#93;</span>,fill=<span style="color: #483d8b;">&quot;yellow&quot;</span><span style="color: black;">&#41;</span>
canv.<span style="color: black;">create_polygon</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">300</span>,<span style="color: #ff4500;">80</span><span style="color: black;">&#93;</span>,<span style="color: black;">&#91;</span><span style="color: #ff4500;">400</span>,<span style="color: #ff4500;">80</span><span style="color: black;">&#93;</span>,<span style="color: black;">&#91;</span><span style="color: #ff4500;">450</span>,<span style="color: #ff4500;">75</span><span style="color: black;">&#93;</span>,<span style="color: black;">&#91;</span><span style="color: #ff4500;">450</span>,<span style="color: #ff4500;">200</span><span style="color: black;">&#93;</span>,
          <span style="color: black;">&#91;</span><span style="color: #ff4500;">300</span>,<span style="color: #ff4500;">180</span><span style="color: black;">&#93;</span>,<span style="color: black;">&#91;</span><span style="color: #ff4500;">330</span>,<span style="color: #ff4500;">160</span><span style="color: black;">&#93;</span>,outline=<span style="color: #483d8b;">&quot;white&quot;</span>,smooth=<span style="color: #ff4500;">1</span><span style="color: black;">&#41;</span></pre></div> </p>
<p>При создании эллипса задаются координаты гипотетического прямоугольника, описывающего данный эллипс.<br />
<div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">canv.<span style="color: black;">create_oval</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">20</span>,<span style="color: #ff4500;">200</span><span style="color: black;">&#93;</span>,<span style="color: black;">&#91;</span><span style="color: #ff4500;">150</span>,<span style="color: #ff4500;">300</span><span style="color: black;">&#93;</span>,fill=<span style="color: #483d8b;">&quot;gray50&quot;</span><span style="color: black;">&#41;</span></pre></div> </p>
<p>Более сложные для понимания фигуры получаются при использовании метода create_arc. В зависимости от значения опции style можно получить сектор (по умолчанию), сегмент (CHORD) или дугу (ARC). Координаты по-прежнему задают прямоугольник, в который вписана окружность, из которой «вырезают» сектор, сегмент или дугу. От опций start и extent зависит угол фигуры.</p>
<p><div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">canv.<span style="color: black;">create_arc</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">160</span>,<span style="color: #ff4500;">230</span><span style="color: black;">&#93;</span>,<span style="color: black;">&#91;</span><span style="color: #ff4500;">230</span>,<span style="color: #ff4500;">330</span><span style="color: black;">&#93;</span>,start=<span style="color: #ff4500;">0</span>,extent=<span style="color: #ff4500;">140</span>,fill=<span style="color: #483d8b;">&quot;lightgreen&quot;</span><span style="color: black;">&#41;</span>
canv.<span style="color: black;">create_arc</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">250</span>,<span style="color: #ff4500;">230</span><span style="color: black;">&#93;</span>,<span style="color: black;">&#91;</span><span style="color: #ff4500;">320</span>,<span style="color: #ff4500;">330</span><span style="color: black;">&#93;</span>,start=<span style="color: #ff4500;">0</span>,extent=<span style="color: #ff4500;">140</span>,
          style=CHORD,fill=<span style="color: #483d8b;">&quot;green&quot;</span><span style="color: black;">&#41;</span>
canv.<span style="color: black;">create_arc</span><span style="color: black;">&#40;</span><span style="color: black;">&#91;</span><span style="color: #ff4500;">340</span>,<span style="color: #ff4500;">230</span><span style="color: black;">&#93;</span>,<span style="color: black;">&#91;</span><span style="color: #ff4500;">410</span>,<span style="color: #ff4500;">330</span><span style="color: black;">&#93;</span>,start=<span style="color: #ff4500;">0</span>,extent=<span style="color: #ff4500;">140</span>,
          style=ARC,outline=<span style="color: #483d8b;">&quot;darkgreen&quot;</span>,width=<span style="color: #ff4500;">2</span><span style="color: black;">&#41;</span> </pre></div></p>
<p>Последний метод объекта canvas, который будет рассмотрен в этом уроке — это метод создающий текстовую надпись.</p>
<p><div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">canv.<span style="color: black;">create_text</span><span style="color: black;">&#40;</span><span style="color: #ff4500;">20</span>,<span style="color: #ff4500;">330</span>,text=<span style="color: #483d8b;">&quot;Опыты с графическими примитивами<span style="color: #000099; font-weight: bold;">\n</span>на холсте&quot;</span>,
          font=<span style="color: #483d8b;">&quot;Verdana 12&quot;</span>,anchor=<span style="color: #483d8b;">&quot;w&quot;</span>,justify=CENTER,fill=<span style="color: #483d8b;">&quot;red&quot;</span><span style="color: black;">&#41;</span> </pre></div></p>
<p>Трудность здесь может возникнуть с пониманием опции anchor (якорь). По умолчанию в заданной координате располагается центр текстовой надписи. Чтобы изменить это и, например, разместить по указанной координате левую границу текста, используется якорь со значением w (от англ. west – запад). Другие значения: n, ne, e, se, s, sw, w, nw. Если букв, задающих сторону привязки две, то вторая определяет вертикальную привязку (вверх или вниз «уйдет» текст от координаты). Свойство justify определяет лишь выравнивание текста относительно себя самого. </p>
<p>В конце следует отметить, что часто требуется «нарисовать» на холсте какие-либо повторяющиеся элементы. Для того, чтобы не загружать код, используют циклы. Например, так:</p>
<p><div class="geshifilter"><pre class="python geshifilter-python" style="font-family:monospace;">x=10
<span style="color: #ff7700;font-weight:bold;">while</span> x <span style="color: #66cc66;">&lt;</span> <span style="color: #ff4500;">450</span>:
     canv.<span style="color: black;">create_rectangle</span><span style="color: black;">&#40;</span>x,<span style="color: #ff4500;">400</span>,x+<span style="color: #ff4500;">50</span>,<span style="color: #ff4500;">450</span><span style="color: black;">&#41;</span>
     x = x + <span style="color: #ff4500;">60</span> </pre></div></p>
<p>Если вы напишите код приведенный в данном уроке (предварительно совершив импорт модуля Tkinter и создание главного окна, а также не забыв расположить на окне холст, и в конце «сделать» mainloop), то при его выполнении увидите такую картину:</p>
<div style="text-align:center;"><img src="../../../img/tkinter/canvas12.gif" width="350" height="336" alt="Работа с виджетом Canvas в Tkinter" /></div>
<h2>Практическая работа</h2>
<p>Запрограммируйте следующие изображения на виджетах-холстах:</p>
<div style="text-align:center;"><img src="../../../img/tkinter/canvas_pract12.gif" width="737" height="236" alt="Работа с графикой в Tkinter" /></div>
  </div>
    </div>
  </body>
</html>
